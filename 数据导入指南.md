# 数据导入指南

## 概述

本项目已清空所有示例数据，为您提供干净的数据结构，方便导入真实的茶叶行业数据。

## 数据结构说明

### 1. 小程序数据文件

#### `miniprogram_data.json`
```json
{
  "version": "1.0",
  "syncTime": "2025-08-13T01:37:00.000000",
  "gardenData": [],      // 茶园数据
  "merchantData": [],    // 商户数据
  "productData": []      // 产品数据
}
```

#### `快速录入数据.json`
```json
{
  "exportTime": "2025-08-13T01:37:00.000000",
  "gardens": [],         // 茶园数据（数组格式）
  "merchants": [],       // 商户数据（数组格式）
  "products": []         // 产品数据（数组格式）
}
```

### 2. 页面数据文件

#### `pages/category/category.js`
- 品类行情页面的价格数据
- 已清空示例数据，等待API数据

### 3. Python脚本

#### `快速完成数据录入.py`
- 数据库录入脚本
- 已清空示例数据，等待真实数据

#### `daily-content-updater.py`
- 内容更新脚本
- 已清空茶叶品种数据库

## 数据导入方法

### 方法一：直接编辑JSON文件

1. **编辑 `miniprogram_data.json`**
```json
{
  "gardenData": [
    {
      "id": "garden_001",
      "name": "您的茶园名称",
      "location": "茶园地址",
      "contact": "联系人",
      "phone": "联系电话"
    }
  ],
  "merchantData": [
    {
      "id": "merchant_001",
      "name": "商户名称",
      "category": "商户类型",
      "contact": "联系人",
      "phone": "联系电话",
      "province": "所在省份"
    }
  ],
  "productData": [
    {
      "id": "product_001",
      "name": "产品名称",
      "category": "产品分类",
      "price": 299.0,
      "merchantId": "merchant_001"
    }
  ]
}
```

2. **编辑 `快速录入数据.json`**
```json
{
  "gardens": [
    ["garden_001", "茶园名称", "地址", "联系人", "电话"]
  ],
  "merchants": [
    ["merchant_001", "商户名称", "类型", "联系人", "电话", "省份"]
  ],
  "products": [
    ["product_001", "产品名称", "分类", 299.0, "merchant_001"]
  ]
}
```

### 方法二：使用Python脚本

1. **编辑 `快速完成数据录入.py`**
```python
# 在脚本中添加您的数据
gardens = [
    ("garden_001", "您的茶园名称", "地址", "联系人", "电话"),
    # 添加更多茶园数据...
]

merchants = [
    ("merchant_001", "商户名称", "类型", "联系人", "电话", "省份"),
    # 添加更多商户数据...
]

products = [
    ("product_001", "产品名称", "分类", 299.0, "merchant_001"),
    # 添加更多产品数据...
]
```

2. **运行脚本**
```bash
python 快速完成数据录入.py
```

### 方法三：使用API接口

1. **启动后端服务**
```bash
python app.py
```

2. **使用API接口导入数据**
```bash
# 导入茶园数据
curl -X POST http://localhost:5000/api/gardens \
  -H "Content-Type: application/json" \
  -d '{"name": "茶园名称", "location": "地址", "contact": "联系人", "phone": "电话"}'

# 导入商户数据
curl -X POST http://localhost:5000/api/merchants \
  -H "Content-Type: application/json" \
  -d '{"name": "商户名称", "category": "类型", "contact": "联系人", "phone": "电话", "province": "省份"}'

# 导入产品数据
curl -X POST http://localhost:5000/api/products \
  -H "Content-Type: application/json" \
  -d '{"name": "产品名称", "category": "分类", "price": 299.0, "merchantId": "merchant_001"}'
```

## 数据格式规范

### 茶园数据格式
```json
{
  "id": "唯一标识符",
  "name": "茶园名称",
  "location": "详细地址",
  "contact": "联系人姓名",
  "phone": "联系电话"
}
```

### 商户数据格式
```json
{
  "id": "唯一标识符",
  "name": "商户名称",
  "category": "商户类型（茶园/茶厂/茶叶批发商等）",
  "contact": "联系人姓名",
  "phone": "联系电话",
  "province": "所在省份"
}
```

### 产品数据格式
```json
{
  "id": "唯一标识符",
  "name": "产品名称",
  "category": "产品分类（绿茶/红茶/乌龙茶等）",
  "price": 价格数值,
  "merchantId": "关联的商户ID"
}
```

## 注意事项

1. **ID唯一性**：确保所有ID在各自类别中唯一
2. **数据一致性**：产品数据中的merchantId必须对应存在的商户ID
3. **数据完整性**：所有必填字段都不能为空
4. **格式规范**：严格按照JSON格式要求
5. **编码格式**：使用UTF-8编码保存文件

## 验证数据

导入数据后，可以通过以下方式验证：

1. **检查JSON文件格式**
```bash
python -m json.tool miniprogram_data.json
```

2. **运行数据验证脚本**
```bash
python 快速完成数据录入.py
```

3. **在小程序中查看效果**
- 启动微信开发者工具
- 导入项目
- 查看各页面数据是否正确显示

## 常见问题

### Q: 数据导入后小程序显示空白？
A: 检查数据格式是否正确，确保JSON语法无误

### Q: 产品显示但商户信息缺失？
A: 检查merchantId是否正确关联到商户数据

### Q: 价格显示异常？
A: 确保价格字段为数值类型，不是字符串

---

**提示**：建议先导入少量测试数据验证格式，确认无误后再批量导入完整数据。
