# 🌐 茶叶批发平台离线模式使用指南

## 📋 概述

当API服务器无法连接时，您的茶叶批发平台会**自动切换到离线模式**，确保所有功能正常使用。

## ✅ 离线模式可用功能

### 🏠 首页内容
- ✅ **推荐内容**：精选茶叶推荐
- ✅ **茶叶资讯**：市场动态和产区新闻  
- ✅ **茶艺文化**：冲泡技巧和文化知识
- ✅ **热点话题**：行业热点和价格动态

### 🏪 核心功能模块
- ✅ **全国市场**：各地茶叶市场信息
- ✅ **采购询价**：发布和查看采购需求
- ✅ **品类行情**：茶叶价格走势
- ✅ **知名品牌**：品牌茶叶展示
- ✅ **尾货清仓**：特价清仓商品
- ✅ **新品到货**：最新茶叶产品
- ✅ **茶园直通**：茶园产品直销
- ✅ **供求平台**：供求信息发布
- ✅ **智慧茶业**：行业分析和预测

## 🔧 如何确认离线模式

1. **启动微信开发者工具**
2. **打开项目并编译**
3. **查看首页右上角**：
   - 🌐 显示"API服务器" = 在线模式
   - 📱 显示"本地缓存" = 离线模式

## 📱 微信小程序配置（重要）

为确保离线模式正常工作，请按照以下步骤配置：

### 步骤1：开发者工具设置
```
1. 打开微信开发者工具
2. 点击"详情"标签
3. 找到"本地设置"
4. ✅ 勾选"不校验合法域名、web-view(业务域名)、TLS版本以及HTTPS证书"
```

### 步骤2：编译运行
```
1. 点击"编译"按钮
2. 等待编译完成
3. 查看首页是否正常显示内容
```

## 🎯 离线模式特点

### ✅ 优势
- **即时响应**：无网络延迟，加载速度快
- **稳定可靠**：不受网络波动影响
- **功能完整**：所有核心功能都可使用
- **数据丰富**：内置完整的示例数据

### ⚠️ 限制
- 数据更新需要重新编译
- 无法与真实API同步最新数据
- 发布功能为模拟发布

## 🛠️ 优化离线体验

### 1. 增加数据来源提示
在页面右上角会显示当前数据来源：
- 🌐 "API服务器" = 在线模式
- 📱 "本地缓存" = 离线模式

### 2. 离线模式指示
页面加载时会显示：
- ✅ "内容加载完成" (在线)
- 📱 "内容(离线模式)" (离线)

## 🚀 恢复在线模式

当你希望恢复API连接时，可以尝试：

### 方法1：一键启动服务器
```bash
双击运行：启动API服务.bat
```

### 方法2：手动启动
```bash
python server.py
```

### 方法3：使用快速启动脚本
```bash
python quick-start-api.py
```

## 🔍 故障排除

### 问题1：小程序无法加载
**解决方案**：
1. 确保勾选了"不校验合法域名"
2. 重新编译项目
3. 检查控制台是否有错误信息

### 问题2：功能按钮无响应
**解决方案**：
1. 检查页面路径是否正确
2. 确保所有页面文件存在
3. 重启微信开发者工具

### 问题3：数据显示不完整
**解决方案**：
1. 离线模式使用内置演示数据
2. 数据量相对较少是正常现象
3. 需要完整数据请恢复API连接

## 📞 技术支持

如果遇到其他问题：

1. **查看控制台日志**：
   - 打开微信开发者工具
   - 点击"调试器"标签
   - 查看Console输出

2. **检查Network请求**：
   - 查看是否有网络请求失败
   - 确认降级机制是否生效

3. **验证页面功能**：
   - 逐一测试各个功能模块
   - 确认页面跳转是否正常

## 🎉 总结

**您的茶叶批发平台已具备完善的离线运行能力！**

即使API服务器暂时无法连接，您仍然可以：
- ✅ 完整体验所有功能
- ✅ 查看丰富的茶叶内容
- ✅ 测试业务流程
- ✅ 进行功能演示

**离线模式让您的平台更加稳定可靠！** 🚀 