<!-- èŒ¶å›­è¯¦æƒ…é¡µé¢ -->
<view class="garden-detail-page">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- è¯¦æƒ…å†…å®¹ -->
  <view class="detail-content" wx:if="{{!loading && garden}}">
    <!-- å›¾ç‰‡è½®æ’­ -->
    <view class="image-section">
      <swiper class="image-swiper" indicator-dots="{{garden.images.length > 1}}" autoplay="{{false}}">
        <swiper-item 
          wx:for="{{garden.images}}" 
          wx:key="*this"
          class="swiper-item"
        >
          <image 
            class="garden-image" 
            src="{{item}}" 
            mode="aspectFill"
            data-current="{{item}}"
            bindtap="previewImage"
          ></image>
        </swiper-item>
      </swiper>
      
      <!-- è®¤è¯æ ‡è¯† -->
      <view class="certification-badge" wx:if="{{garden.isCertified}}">
        <text class="badge-text">å®åœ°è®¤è¯</text>
      </view>
      
      <!-- å½“å­£æ ‡è¯† -->
      <view class="seasonal-badge" wx:if="{{garden.isSeasonal}}">
        <text class="badge-text">å½“å­£é‡‡æ‘˜</text>
      </view>
      
      <!-- å“ç‰Œæ ‡è¯† -->
      <view class="brand-badge" wx:if="{{garden.merchant.brand}}">
        <text class="badge-text">{{garden.merchant.brand}}</text>
      </view>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <view class="action-buttons">
        <button class="action-btn favorite-btn" bindtap="toggleFavorite">
          <text class="btn-icon">â¤ï¸</text>
        </button>
        <button class="action-btn share-btn" open-type="share">
          <text class="btn-icon">ğŸ“¤</text>
        </button>
        <button class="action-btn report-btn" bindtap="report">
          <text class="btn-icon">âš ï¸</text>
        </button>
      </view>
    </view>

    <!-- åŸºæœ¬ä¿¡æ¯ -->
    <view class="basic-info">
      <view class="garden-header">
        <text class="garden-name">{{garden.name}}</text>
        <view class="garden-tags">
          <text class="tag-item">{{garden.teaType}}</text>
          <text class="tag-item">{{garden.area}}{{garden.areaUnit}}</text>
        </view>
      </view>
      
      <view class="garden-location">
        <text class="location-icon">ğŸ“</text>
        <text class="location-text">{{garden.location}}</text>
      </view>
      
      <view class="harvest-info">
        <text class="harvest-label">é‡‡æ‘˜æœŸï¼š</text>
        <text class="harvest-period">{{garden.harvestPeriod}}</text>
      </view>
      
      <view class="garden-features">
        <text 
          wx:for="{{garden.features}}" 
          wx:key="*this" 
          wx:for-item="feature"
          class="feature-tag"
        >
          {{feature}}
        </text>
      </view>
    </view>

    <!-- ä»·æ ¼ä¿¡æ¯ -->
    <view class="price-section">
      <view class="section-title">ä»·æ ¼ä¿¡æ¯</view>
      <view class="price-content">
        <view class="current-price">
          <text class="price-label">å½“å‰ä»·æ ¼ï¼š</text>
          <text class="price-value">{{garden.pricing.currentPrice}}</text>
          <text class="price-trend {{garden.pricing.priceTrend}}">
            {{garden.pricing.priceTrend === 'up' ? 'â†—' : garden.pricing.priceTrend === 'down' ? 'â†˜' : 'â†’'}}
          </text>
        </view>
        
        <view class="price-details">
          <view class="detail-item">
            <text class="detail-label">å»å¹´ä»·æ ¼ï¼š</text>
            <text class="detail-value">{{garden.pricing.lastYearPrice}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">èµ·è®¢é‡ï¼š</text>
            <text class="detail-value">{{garden.pricing.minOrder}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">å‘è´§æ—¶é—´ï¼š</text>
            <text class="detail-value">{{garden.pricing.delivery}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">ä¿éšœï¼š</text>
            <text class="detail-value">{{garden.pricing.guarantee}}</text>
          </view>
        </view>
        
        <view class="payment-methods">
          <text class="payment-label">æ”¯ä»˜æ–¹å¼ï¼š</text>
          <view class="payment-tags">
            <text 
              wx:for="{{garden.pricing.payment}}" 
              wx:key="*this"
              class="payment-tag"
            >
              {{item}}
            </text>
          </view>
        </view>
      </view>
    </view>

    <!-- èŒ¶å†œä¿¡æ¯ -->
    <view class="merchant-section">
      <view class="section-title">èŒ¶å†œä¿¡æ¯</view>
      <view class="merchant-content">
        <view class="merchant-basic">
          <image class="merchant-avatar" src="{{garden.merchant.avatar}}" mode="aspectFill"></image>
          <view class="merchant-details">
            <text class="merchant-name">{{garden.merchant.name}}</text>
            <view class="merchant-rating">
              <text class="rating-score">{{garden.merchant.rating}}</text>
              <text class="rating-star">â­</text>
              <text class="verified-badge" wx:if="{{garden.merchant.isVerified}}">å·²è®¤è¯</text>
            </view>
            <text class="merchant-desc">{{garden.merchant.description}}</text>
          </view>
        </view>
        
        <!-- è”ç³»ä¿¡æ¯ -->
        <view class="contact-info">
          <view class="contact-item" data-type="wechat" bindtap="contactFarmer">
            <text class="contact-icon">ğŸ’¬</text>
            <text class="contact-label">å¾®ä¿¡</text>
            <text class="contact-value">{{contactUnlocked ? garden.merchant.wechat : 'ç‚¹å‡»è§£é”'}}</text>
            <text class="contact-arrow">></text>
          </view>
          
          <view class="contact-item" data-type="phone" bindtap="contactFarmer">
            <text class="contact-icon">ğŸ“</text>
            <text class="contact-label">ç”µè¯</text>
            <text class="contact-value">{{contactUnlocked ? garden.merchant.phone : 'ç‚¹å‡»è§£é”'}}</text>
            <text class="contact-arrow">></text>
          </view>
          
          <view class="contact-item" data-type="address" bindtap="contactFarmer">
            <text class="contact-icon">ğŸ“</text>
            <text class="contact-label">åœ°å€</text>
            <text class="contact-value">{{contactUnlocked ? garden.merchant.address : 'ç‚¹å‡»è§£é”'}}</text>
            <text class="contact-arrow">></text>
          </view>
        </view>
      </view>
    </view>

    <!-- è¯¦ç»†ä¿¡æ¯ -->
    <view class="details-section">
      <view class="section-title">èŒ¶å›­è¯¦æƒ…</view>
      <view class="details-content">
        <view class="detail-row">
          <text class="detail-label">æµ·æ‹”ï¼š</text>
          <text class="detail-value">{{garden.details.altitude}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">åœŸå£¤ï¼š</text>
          <text class="detail-value">{{garden.details.soil}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">æ°”å€™ï¼š</text>
          <text class="detail-value">{{garden.details.climate}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">é™æ°´é‡ï¼š</text>
          <text class="detail-value">{{garden.details.rainfall}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">æ¸©åº¦ï¼š</text>
          <text class="detail-value">{{garden.details.temperature}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">ç§æ¤å¹´ä»½ï¼š</text>
          <text class="detail-value">{{garden.details.plantingYear}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">åŠ å·¥å·¥è‰ºï¼š</text>
          <text class="detail-value">{{garden.details.processing}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">å­˜å‚¨æ¡ä»¶ï¼š</text>
          <text class="detail-value">{{garden.details.storage}}</text>
        </view>
        
        <view class="certification-section">
          <text class="section-subtitle">è®¤è¯èµ„è´¨</text>
          <view class="certification-tags">
            <text 
              wx:for="{{garden.details.certification}}" 
              wx:key="*this"
              class="certification-tag"
            >
              {{item}}
            </text>
          </view>
        </view>
        
        <view class="awards-section">
          <text class="section-subtitle">è·å¾—è£èª‰</text>
          <view class="awards-list">
            <text 
              wx:for="{{garden.details.awards}}" 
              wx:key="*this"
              class="award-item"
            >
              ğŸ† {{item}}
            </text>
          </view>
        </view>
      </view>
    </view>

    <!-- ç”¨æˆ·è¯„ä»· -->
    <view class="reviews-section">
      <view class="section-title">ç”¨æˆ·è¯„ä»· ({{garden.reviews.length}})</view>
      <view class="reviews-content">
        <view 
          wx:for="{{garden.reviews}}" 
          wx:key="id"
          class="review-item"
        >
          <view class="review-header">
            <image class="reviewer-avatar" src="{{item.avatar}}" mode="aspectFill"></image>
            <view class="reviewer-info">
              <text class="reviewer-name">{{item.user}}</text>
              <view class="review-rating">
                <text 
                  wx:for="{{item.rating}}" 
                  wx:key="*this"
                  class="rating-star"
                >â­</text>
              </view>
            </view>
            <text class="review-time">{{item.time}}</text>
          </view>
          
          <view class="review-content">
            <text class="review-text">{{item.content}}</text>
            <view class="review-images" wx:if="{{item.images.length > 0}}">
              <image 
                wx:for="{{item.images}}" 
                wx:key="*this" 
                wx:for-item="image"
                class="review-image"
                src="{{image}}"
                mode="aspectFill"
                data-current="{{image}}"
                data-urls="{{item.images}}"
                bindtap="previewReviewImage"
              ></image>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- ç›¸å…³èŒ¶å›­ -->
    <view class="related-section">
      <view class="section-title">ç›¸å…³èŒ¶å›­</view>
      <view class="related-content">
        <view 
          wx:for="{{garden.relatedGardens}}" 
          wx:key="id"
          class="related-item"
          data-id="{{item.id}}"
          bindtap="goToRelatedGarden"
        >
          <image class="related-image" src="{{item.image}}" mode="aspectFill"></image>
          <view class="related-info">
            <text class="related-name">{{item.name}}</text>
            <text class="related-location">{{item.location}}</text>
            <text class="related-price">{{item.price}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨ä¿¡æ¯ -->
    <view class="footer-info">
      <view class="info-row">
        <text class="info-label">å‘å¸ƒæ—¶é—´ï¼š</text>
        <text class="info-value">{{garden.createTime}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">æµè§ˆæ¬¡æ•°ï¼š</text>
        <text class="info-value">{{garden.viewCount}}æ¬¡</text>
      </view>
    </view>
  </view>
</view> 