<!--pages/simple-test/simple-test.wxml-->
<view class="container">
  <view class="header">
    <text class="title">å­˜å‚¨æ•°æ®ç®¡ç†</text>
    <text class="subtitle">ç®¡ç†æœ¬åœ°å­˜å‚¨çš„æ•°æ®</text>
  </view>

  <view class="section">
    <view class="section-header">
      <text class="section-title">å½“å‰å­˜å‚¨çš„é”®</text>
      <button class="refresh-btn" bindtap="refreshList">åˆ·æ–°</button>
    </view>
    
    <view class="keys-list">
      <view wx:if="{{storageKeys.length === 0}}" class="empty-state">
        <text>æš‚æ— å­˜å‚¨æ•°æ®</text>
      </view>
      <view wx:for="{{storageKeys}}" wx:key="index" class="key-item">
        <text class="key-name">{{item}}</text>
      </view>
    </view>
  </view>

  <view class="section">
    <view class="section-header">
      <text class="section-title">è¶…ç®€å•æ¸…é™¤</text>
    </view>
    
    <view class="action-buttons">
      <button class="action-btn simple-clear" bindtap="simpleClear">
        ğŸ—‘ï¸ ä¸€é”®æ¸…é™¤ paymentSettings
      </button>
    </view>
  </view>

  <view class="section">
    <view class="section-header">
      <text class="section-title">è‡ªåŠ¨æ¸…ç†</text>
    </view>
    
    <view class="action-buttons">
      <button class="action-btn auto-cleanup" bindtap="performAutoCleanup">
        ğŸ§¹ æ‰§è¡Œè‡ªåŠ¨æ¸…ç†
      </button>
    </view>
  </view>

  <view class="section">
    <view class="section-header">
      <text class="section-title">æ‰‹åŠ¨æ¸…é™¤æ“ä½œ</text>
    </view>
    
    <view class="action-buttons">
      <button class="action-btn clear-specific" bindtap="clearSpecificKey">
        æ¸…é™¤ paymentSettings
      </button>
      
      <button class="action-btn clear-payment" bindtap="clearPaymentData">
        æ¸…é™¤æ”¯ä»˜ç›¸å…³æ•°æ®
      </button>
      
      <button class="action-btn clear-all" bindtap="clearAllData">
        æ¸…é™¤æ‰€æœ‰æ•°æ®
      </button>
    </view>
  </view>

  <view wx:if="{{clearResult}}" class="result-section">
    <text class="result-text">{{clearResult}}</text>
  </view>

  <view wx:if="{{cleanupStats}}" class="section">
    <view class="section-header">
      <text class="section-title">æ¸…ç†ç»Ÿè®¡</text>
    </view>
    
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-label">æ€»æ¸…ç†æ¬¡æ•°</text>
        <text class="stat-value">{{cleanupStats.totalCleanups}}</text>
      </view>
      <view class="stat-item">
        <text class="stat-label">æ€»æ¸…ç†é”®æ•°</text>
        <text class="stat-value">{{cleanupStats.totalCleanedKeys}}</text>
      </view>
      <view class="stat-item">
        <text class="stat-label">æ€»é‡Šæ”¾ç©ºé—´</text>
        <text class="stat-value">{{cleanupStats.totalFreedSpace}} å­—èŠ‚</text>
      </view>
      <view class="stat-item">
        <text class="stat-label">å¹³å‡é‡Šæ”¾ç©ºé—´</text>
        <text class="stat-value">{{cleanupStats.averageFreedSpace}} å­—èŠ‚</text>
      </view>
    </view>
  </view>

  <view wx:if="{{cleanupHistory.length > 0}}" class="section">
    <view class="section-header">
      <text class="section-title">æœ€è¿‘æ¸…ç†è®°å½•</text>
    </view>
    
    <view class="history-list">
      <view wx:for="{{cleanupHistory}}" wx:key="timestamp" class="history-item">
        <view class="history-header">
          <text class="history-time">{{item.timestamp}}</text>
          <text class="history-count">{{item.cleanedCount}} ä¸ªé”®</text>
        </view>
        <text class="history-detail">é‡Šæ”¾ {{item.freedSpace}} å­—èŠ‚</text>
      </view>
    </view>
  </view>

  <view class="tips">
    <text class="tip-title">è¯´æ˜ï¼š</text>
    <text class="tip-text">â€¢ è‡ªåŠ¨æ¸…ç†ä¼šåœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œ</text>
    <text class="tip-text">â€¢ ä¸åŒç¯å¢ƒæœ‰ä¸åŒçš„æ¸…ç†ç­–ç•¥</text>
    <text class="tip-text">â€¢ paymentSettings æ˜¯æ”¯ä»˜ç®¡ç†å™¨çš„é…ç½®æ•°æ®</text>
    <text class="tip-text">â€¢ æ¸…é™¤åæ•°æ®å°†æ— æ³•æ¢å¤ï¼Œè¯·è°¨æ…æ“ä½œ</text>
  </view>
</view> 