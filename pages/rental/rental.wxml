<!-- å‡ºç§Ÿè½¬è®©é¡µé¢ -->
<view class="rental-page">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <view class="header-title">
      <text class="title-text">å‡ºç§Ÿè½¬è®©</text>
      <text class="title-desc">èµ„äº§æµè½¬ Â· å•†æœºæ— é™</text>
    </view>
    <button class="publish-btn" bindtap="publishRental">
      <text class="publish-icon">+</text>
      <text class="publish-text">å‘å¸ƒ</text>
    </button>
  </view>

  <!-- æœç´¢æ  -->
  <view class="search-section">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="search-input"
        placeholder="æœç´¢æ¡£å£ã€ä»“åº“ã€è®¾å¤‡ã€èŒ¶å›­..."
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
      />
    </view>
  </view>

  <!-- åˆ†ç±»å¯¼èˆª -->
  <view class="category-section">
    <view class="category-list">
      <view 
        wx:for="{{categories}}" 
        wx:key="id"
        class="category-item {{currentFilter === item.id ? 'active' : ''}}"
        data-id="{{item.id}}"
        bindtap="onCategoryTap"
      >
        <text class="category-icon">{{item.icon}}</text>
        <text class="category-name">{{item.name}}</text>
        <text class="category-count">{{item.count}}</text>
        <view class="hot-badge" wx:if="{{item.isHot}}">çƒ­</view>
      </view>
    </view>
  </view>

  <!-- æ™ºèƒ½æ¨è -->
  <view class="recommend-section" wx:if="{{recommendedList.length > 0}}">
    <view class="section-header">
      <text class="section-title">ä¸ºæ‚¨æ¨è</text>
      <text class="section-desc">æ ¹æ®æ‚¨çš„åå¥½æ™ºèƒ½æ¨è</text>
    </view>
    <view class="recommend-list">
      <view 
        wx:for="{{recommendedList}}" 
        wx:key="id"
        class="recommend-item"
        data-id="{{item.id}}"
        bindtap="onItemTap"
      >
        <image class="recommend-image" src="{{item.images[0]}}" mode="aspectFill"></image>
        <view class="recommend-info">
          <text class="recommend-title">{{item.title}}</text>
          <text class="recommend-location">{{item.location}}</text>
          <text class="recommend-price">{{item.price}}</text>
        </view>
        <view class="recommend-badge">æ¨è</view>
      </view>
    </view>
  </view>

  <!-- ç­›é€‰å’Œæ’åº -->
  <view class="filter-section">
    <!-- ç±»å‹ç­›é€‰ -->
    <view class="filter-row">
      <text class="filter-label">ç±»å‹ï¼š</text>
      <view class="filter-options">
        <view 
          wx:for="{{filterOptions}}" 
          wx:key="value"
          class="filter-item {{currentFilter === item.value ? 'active' : ''}}"
          data-value="{{item.value}}"
          bindtap="onFilterChange"
        >
          {{item.label}}
        </view>
      </view>
    </view>
    
    <!-- ä»·æ ¼ç±»å‹ç­›é€‰ -->
    <view class="filter-row">
      <text class="filter-label">æ–¹å¼ï¼š</text>
      <view class="filter-options">
        <view 
          wx:for="{{priceTypeOptions}}" 
          wx:key="value"
          class="filter-item {{currentPriceType === item.value ? 'active' : ''}}"
          data-value="{{item.value}}"
          bindtap="onPriceTypeChange"
        >
          {{item.label}}
        </view>
      </view>
    </view>
    
    <!-- æ’åºé€‰é¡¹ -->
    <view class="filter-row">
      <text class="filter-label">æ’åºï¼š</text>
      <view class="filter-options">
        <view 
          wx:for="{{sortOptions}}" 
          wx:key="value"
          class="filter-item {{currentSort === item.value ? 'active' : ''}}"
          data-value="{{item.value}}"
          bindtap="onSortChange"
        >
          {{item.label}}
        </view>
      </view>
    </view>
  </view>

  <!-- å‡ºç§Ÿè½¬è®©åˆ—è¡¨ -->
  <view class="rental-list">
    <view class="list-title">å…¨éƒ¨ä¿¡æ¯</view>
    
    <view 
      wx:for="{{rentalList}}" 
      wx:key="id"
      class="rental-item"
      data-id="{{item.id}}"
      bindtap="onItemTap"
    >
      <!-- å›¾ç‰‡åŒºåŸŸ -->
      <view class="item-images">
        <swiper class="image-swiper" indicator-dots="{{item.images.length > 1}}" autoplay="{{false}}">
          <swiper-item wx:for="{{item.images}}" wx:key="*this" wx:for-item="image">
            <image class="item-image" src="{{image}}" mode="aspectFill"></image>
          </swiper-item>
        </swiper>
        
        <!-- æ¨èæ ‡è¯† -->
        <view class="recommend-badge" wx:if="{{item.isRecommended}}">
          <text class="badge-text">æ¨è</text>
        </view>
        
        <!-- ç´§æ€¥æ ‡è¯† -->
        <view class="urgent-badge" wx:if="{{item.isUrgent}}">
          <text class="badge-text">ç´§æ€¥</text>
        </view>
        
        <!-- ä»·æ ¼ç±»å‹æ ‡è¯† -->
        <view class="price-type-badge {{item.priceType}}">
          <text class="badge-text">{{item.priceType === 'transfer' ? 'è½¬è®©' : 'å‡ºç§Ÿ'}}</text>
        </view>
      </view>

      <!-- ä¿¡æ¯åŒºåŸŸ -->
      <view class="item-info">
        <view class="item-header">
          <text class="item-title">{{item.title}}</text>
          <view class="item-tags">
            <text class="tag-item">{{item.typeName}}</text>
            <text class="tag-item">{{item.area}}{{item.areaUnit}}</text>
          </view>
        </view>
        
        <view class="item-location">
          <text class="location-icon">ğŸ“</text>
          <text class="location-text">{{item.location}}</text>
        </view>
        
        <!-- åˆ†ç±»ç‰¹å®šä¿¡æ¯ -->
        <view class="category-specific">
          <!-- å¸‚åœºæ¡£å£ -->
          <view class="specific-info" wx:if="{{item.type === 'market'}}">
            <text class="specific-label">æ¡£å£å·ï¼š</text>
            <text class="specific-value">{{item.boothNumber}}</text>
            <text class="specific-label">ç®¡ç†æ–¹ï¼š</text>
            <text class="specific-value">{{item.marketContact}}</text>
          </view>
          
          <!-- ä»“åº“/å‚æˆ¿ -->
          <view class="specific-info" wx:if="{{item.type === 'warehouse'}}">
            <text class="specific-label">å±‚é«˜ï¼š</text>
            <text class="specific-value">{{item.height}}ç±³</text>
            <text class="specific-label">è·è½½ï¼š</text>
            <text class="specific-value">{{item.loadCapacity}}</text>
            <text class="specific-label">é€šé“ï¼š</text>
            <text class="specific-value">{{item.truckWidth}}ç±³</text>
          </view>
          
          <!-- èŒ¶å›­ -->
          <view class="specific-info" wx:if="{{item.type === 'garden'}}">
            <text class="specific-label">åœŸåœ°æ€§è´¨ï¼š</text>
            <text class="specific-value">{{item.landType}}</text>
            <text class="specific-label">å‰©ä½™å¹´é™ï¼š</text>
            <text class="specific-value">{{item.remainingYears}}å¹´</text>
          </view>
          
          <!-- è®¾å¤‡ -->
          <view class="specific-info" wx:if="{{item.type === 'equipment'}}">
            <text class="specific-label">è®¾å¤‡æ¸…å•ï¼š</text>
            <text class="specific-value">{{item.equipmentList.join('ã€')}}</text>
            <text class="specific-label">ä½¿ç”¨å¹´é™ï¼š</text>
            <text class="specific-value">{{item.useYears}}å¹´</text>
            <text class="specific-label">ç°åœºè¯•æœºï¼š</text>
            <text class="specific-value">{{item.canTest ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ'}}</text>
          </view>
          
          <!-- æ•´å‚è½¬è®© -->
          <view class="specific-info" wx:if="{{item.type === 'factory'}}">
            <text class="specific-label">èµ„äº§åŒ…ï¼š</text>
            <text class="specific-value">{{item.assetDetails.join('ã€')}}</text>
            <text class="specific-label">å€ºåŠ¡æƒ…å†µï¼š</text>
            <text class="specific-value">{{item.debtInfo}}</text>
          </view>
        </view>
        
        <view class="item-tags">
          <text 
            wx:for="{{item.tags}}" 
            wx:key="*this" 
            wx:for-item="tag"
            class="feature-tag"
          >
            {{tag}}
          </text>
        </view>
      </view>

      <!-- å‘å¸ƒè€…ä¿¡æ¯ -->
      <view class="publisher-info">
        <view class="publisher-basic">
          <image class="publisher-avatar" src="{{item.merchant.avatar}}" mode="aspectFill"></image>
          <view class="publisher-details">
            <text class="publisher-name">{{item.merchant.name}}</text>
            <view class="publisher-rating">
              <text class="rating-score">{{item.merchant.rating}}</text>
              <text class="rating-star">â­</text>
              <text class="verified-badge" wx:if="{{item.merchant.isVerified}}">å·²è®¤è¯</text>
            </view>
          </view>
        </view>
        
        <view class="publisher-actions">
          <button 
            class="contact-btn"
            data-wechat="publisher_{{item.id}}"
            bindtap="contactPublisher"
            catchtap="contactPublisher"
          >
            è”ç³»å‘å¸ƒè€…
          </button>
        </view>
      </view>

      <!-- åº•éƒ¨ä¿¡æ¯ -->
      <view class="item-footer">
        <view class="price-info">
          <text class="price-label">ä»·æ ¼ï¼š</text>
          <text class="price-value">{{item.price}}</text>
        </view>
        <view class="view-count">
          <text class="count-icon">ğŸ‘ï¸</text>
          <text class="count-text">{{item.viewCount}}æ¬¡æµè§ˆ</text>
        </view>
        <view class="create-time">
          <text class="time-text">{{item.createTime}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
  
  <view class="no-more" wx:if="{{!hasMore && rentalList.length > 0}}">
    <text class="no-more-text">æ²¡æœ‰æ›´å¤šä¿¡æ¯äº†</text>
  </view>
  
  <view class="empty-state" wx:if="{{rentalList.length === 0}}">
    <text class="empty-text">æš‚æ— å‡ºç§Ÿè½¬è®©ä¿¡æ¯</text>
  </view>
</view> 