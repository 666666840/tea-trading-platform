<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">æ±‚è´­ç®¡ç†</text>
    <button class="publish-btn" bindtap="publishNewInquiry">
      <text class="publish-icon">+</text>
      <text class="publish-text">å‘å¸ƒæ±‚è´­</text>
    </button>
  </view>

  <!-- æ ‡ç­¾é¡µåˆ‡æ¢ -->
  <view class="tab-header">
    <view class="tab-item {{activeTab === 0 ? 'active' : ''}}" 
          bindtap="switchTab" 
          data-index="0">
      <text class="tab-text">æˆ‘çš„æ±‚è´­</text>
    </view>
    <view class="tab-item {{activeTab === 1 ? 'active' : ''}}" 
          bindtap="switchTab" 
          data-index="1">
      <text class="tab-text">æ”¶è—çš„æ±‚è´­</text>
    </view>
  </view>

  <!-- ç­›é€‰æ¡ä»¶ -->
  <view class="filter-section">
    <view class="filter-row">
      <text class="filter-label">çŠ¶æ€ï¼š</text>
      <view class="filter-options">
        <view class="filter-option {{filterStatus === 'all' ? 'active' : ''}}" 
              bindtap="filterByStatus" 
              data-status="all">å…¨éƒ¨</view>
        <view class="filter-option {{filterStatus === 'active' ? 'active' : ''}}" 
              bindtap="filterByStatus" 
              data-status="active">æ±‚è´­ä¸­</view>
        <view class="filter-option {{filterStatus === 'expired' ? 'active' : ''}}" 
              bindtap="filterByStatus" 
              data-status="expired">å·²è¿‡æœŸ</view>
        <view class="filter-option {{filterStatus === 'closed' ? 'active' : ''}}" 
              bindtap="filterByStatus" 
              data-status="closed">å·²å…³é—­</view>
      </view>
    </view>
    <view class="filter-row">
      <text class="filter-label">åˆ†ç±»ï¼š</text>
      <view class="filter-options">
        <view class="filter-option {{filterCategory === 'all' ? 'active' : ''}}" 
              bindtap="filterByCategory" 
              data-category="all">å…¨éƒ¨</view>
        <view class="filter-option {{filterCategory === 'ç»¿èŒ¶' ? 'active' : ''}}" 
              bindtap="filterByCategory" 
              data-category="ç»¿èŒ¶">ç»¿èŒ¶</view>
        <view class="filter-option {{filterCategory === 'çº¢èŒ¶' ? 'active' : ''}}" 
              bindtap="filterByCategory" 
              data-category="çº¢èŒ¶">çº¢èŒ¶</view>
        <view class="filter-option {{filterCategory === 'ä¹Œé¾™èŒ¶' ? 'active' : ''}}" 
              bindtap="filterByCategory" 
              data-category="ä¹Œé¾™èŒ¶">ä¹Œé¾™èŒ¶</view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <view class="loading-icon">â³</view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- æˆ‘çš„æ±‚è´­åˆ—è¡¨ -->
  <view class="inquiry-list" wx:if="{{!loading && activeTab === 0}}">
    <view class="list-empty" wx:if="{{inquiryList.length === 0}}">
      <text class="empty-icon">ğŸ“</text>
      <text class="empty-text">æš‚æ— æ±‚è´­ä¿¡æ¯</text>
      <text class="empty-tip">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å‘å¸ƒæ‚¨çš„ç¬¬ä¸€ä¸ªæ±‚è´­ä¿¡æ¯</text>
    </view>
    
    <view class="inquiry-item" 
          wx:for="{{inquiryList}}" 
          wx:key="id"
          bindtap="viewInquiryDetail" 
          data-id="{{item.id}}">
      <view class="inquiry-header">
        <text class="inquiry-title">{{item.title}}</text>
        <view class="inquiry-status {{item.status}}">{{item.statusText}}</view>
      </view>
      
      <view class="inquiry-content">
        <text class="inquiry-category">{{item.category}} - {{item.subCategory}}</text>
        <text class="inquiry-quantity">{{item.quantity}} {{item.unit}}</text>
        <text class="inquiry-desc">{{item.description}}</text>
      </view>
      
      <view class="inquiry-meta">
        <view class="meta-left">
          <text class="meta-time">å‘å¸ƒæ—¶é—´ï¼š{{item.publishTime}}</text>
          <text class="meta-expire">åˆ°æœŸæ—¶é—´ï¼š{{item.expireTime}}</text>
        </view>
        <view class="meta-right">
          <text class="meta-stat">æµè§ˆ {{item.stats.viewCount}}</text>
          <text class="meta-stat">æŠ¥ä»· {{item.stats.quoteCount}}</text>
          <text class="meta-stat">æ”¶è— {{item.stats.favoriteCount}}</text>
        </view>
      </view>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <view class="inquiry-actions">
        <button class="action-btn edit-btn" 
                bindtap="editInquiry" 
                data-id="{{item.id}}"
                wx:if="{{item.status === 'active'}}">ç¼–è¾‘</button>
        <button class="action-btn close-btn" 
                bindtap="closeInquiry" 
                data-id="{{item.id}}"
                wx:if="{{item.status === 'active'}}">å…³é—­</button>
        <button class="action-btn delete-btn" 
                bindtap="deleteInquiry" 
                data-id="{{item.id}}"
                wx:if="{{item.status === 'expired' || item.status === 'closed'}}">åˆ é™¤</button>
      </view>
    </view>
  </view>

  <!-- æ”¶è—çš„æ±‚è´­åˆ—è¡¨ -->
  <view class="inquiry-list" wx:if="{{!loading && activeTab === 1}}">
    <view class="list-empty" wx:if="{{favoriteList.length === 0}}">
      <text class="empty-icon">â¤ï¸</text>
      <text class="empty-text">æš‚æ— æ”¶è—çš„æ±‚è´­ä¿¡æ¯</text>
      <text class="empty-tip">åœ¨æ±‚è´­ä¿¡æ¯é¡µé¢ç‚¹å‡»æ”¶è—æŒ‰é’®æ·»åŠ æ”¶è—</text>
    </view>
    
    <view class="inquiry-item" 
          wx:for="{{favoriteList}}" 
          wx:key="id"
          bindtap="viewInquiryDetail" 
          data-id="{{item.id}}">
      <view class="inquiry-header">
        <text class="inquiry-title">{{item.title}}</text>
        <view class="inquiry-status {{item.status}}">{{item.statusText}}</view>
      </view>
      
      <view class="publisher-info">
        <image class="publisher-avatar" src="{{item.publisher.avatar}}" mode="aspectFill"></image>
        <text class="publisher-name">{{item.publisher.nickname}}</text>
      </view>
      
      <view class="inquiry-content">
        <text class="inquiry-category">{{item.category}} - {{item.subCategory}}</text>
        <text class="inquiry-quantity">{{item.quantity}} {{item.unit}}</text>
        <text class="inquiry-desc">{{item.description}}</text>
      </view>
      
      <view class="inquiry-meta">
        <view class="meta-left">
          <text class="meta-time">å‘å¸ƒæ—¶é—´ï¼š{{item.publishTime}}</text>
          <text class="meta-expire">åˆ°æœŸæ—¶é—´ï¼š{{item.expireTime}}</text>
        </view>
        <view class="meta-right">
          <text class="meta-stat">æµè§ˆ {{item.stats.viewCount}}</text>
          <text class="meta-stat">æŠ¥ä»· {{item.stats.quoteCount}}</text>
          <text class="meta-stat">æ”¶è— {{item.stats.favoriteCount}}</text>
        </view>
      </view>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <view class="inquiry-actions">
        <button class="action-btn contact-btn" 
                bindtap="viewInquiryDetail" 
                data-id="{{item.id}}">è”ç³»ä¹°å®¶</button>
        <button class="action-btn unfavorite-btn" 
                bindtap="unfavoriteInquiry" 
                data-id="{{item.id}}">å–æ¶ˆæ”¶è—</button>
      </view>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{hasMore && !loading}}">
    <text bindtap="loadMore">åŠ è½½æ›´å¤š</text>
  </view>
</view> 