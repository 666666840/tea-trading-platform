<view class="container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <view class="loading-icon">â³</view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- å•†æˆ·è¯¦æƒ… -->
  <view class="merchant-detail" wx:if="{{!loading && merchantInfo}}">
    <!-- å•†æˆ·åŸºæœ¬ä¿¡æ¯ -->
    <view class="merchant-header">
      <view class="merchant-basic">
        <image class="merchant-logo" src="{{merchantInfo.logo}}" mode="aspectFill"></image>
        <view class="merchant-info">
          <view class="merchant-name">
            <text>{{merchantInfo.name}}</text>
            <view class="verification-badge" wx:if="{{merchantInfo.verified}}">âœ“</view>
          </view>
          <view class="merchant-rating">
            <text class="rating-stars">â­â­â­â­â­</text>
            <text class="rating-score">{{merchantInfo.rating}}</text>
          </view>
          <view class="merchant-status">
            <view class="activity-status {{merchantInfo.activityLevel}}">
              {{merchantInfo.activityText}}
            </view>
          </view>
        </view>
      </view>
      
      <view class="contact-actions">
        <button class="contact-btn" bindtap="contactMerchant">è”ç³»å•†æˆ·</button>
      </view>
    </view>

    <!-- å•†æˆ·ç»Ÿè®¡ä¿¡æ¯ -->
    <view class="merchant-stats">
      <view class="stat-item">
        <text class="stat-value">{{merchantInfo.responseTime}}</text>
        <text class="stat-label">å“åº”æ—¶é—´</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{merchantInfo.lastActive}}</text>
        <text class="stat-label">æœ€åæ´»è·ƒ</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{merchantInfo.established}}</text>
        <text class="stat-label">æˆç«‹æ—¶é—´</text>
      </view>
    </view>

    <!-- ä¸»è¥äº§å“ -->
    <view class="section">
      <view class="section-title">ä¸»è¥äº§å“</view>
      <view class="product-tags">
        <text class="product-tag" wx:for="{{merchantInfo.mainProducts}}" wx:key="*this">{{item}}</text>
      </view>
    </view>

    <!-- å•†æˆ·ä»‹ç» -->
    <view class="section">
      <view class="section-title">å•†æˆ·ä»‹ç»</view>
      <text class="merchant-description">{{merchantInfo.description}}</text>
    </view>

    <!-- è”ç³»ä¿¡æ¯ -->
    <view class="section">
      <view class="section-title">è”ç³»ä¿¡æ¯</view>
      <view class="contact-info">
        <view class="contact-item">
          <text class="contact-label">è”ç³»ç”µè¯ï¼š</text>
          <text class="contact-value" bindtap="makePhoneCall">{{merchantInfo.contact.phone}}</text>
        </view>
        <view class="contact-item">
          <text class="contact-label">å¾®ä¿¡å·ï¼š</text>
          <text class="contact-value" bindtap="copyWechat">{{merchantInfo.contact.wechat}}</text>
        </view>
        <view class="contact-item">
          <text class="contact-label">è¯¦ç»†åœ°å€ï¼š</text>
          <text class="contact-value">{{merchantInfo.address}}</text>
        </view>
        <view class="contact-item">
          <text class="contact-label">è¥ä¸šæ—¶é—´ï¼š</text>
          <text class="contact-value">{{merchantInfo.businessHours}}</text>
        </view>
      </view>
    </view>

    <!-- äº§å“å±•ç¤º -->
    <view class="section">
      <view class="section-title">äº§å“å±•ç¤º</view>
      <view class="product-list">
        <view class="product-item" 
              wx:for="{{merchantInfo.products}}" 
              wx:key="id"
              bindtap="viewProduct" 
              data-id="{{item.id}}">
          <image class="product-image" src="{{item.image}}" mode="aspectFill"></image>
          <view class="product-info">
            <text class="product-name">{{item.name}}</text>
            <text class="product-type">{{item.type}}</text>
            <text class="product-price">{{item.price}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- èµ„è´¨è¯ä¹¦ -->
    <view class="section">
      <view class="section-title">èµ„è´¨è¯ä¹¦</view>
      <view class="certificate-list">
        <view class="certificate-item" wx:for="{{merchantInfo.certificates}}" wx:key="*this">
          <text class="certificate-icon">ğŸ“„</text>
          <text class="certificate-name">{{item}}</text>
        </view>
      </view>
    </view>

    <!-- æœåŠ¡é¡¹ç›® -->
    <view class="section">
      <view class="section-title">æœåŠ¡é¡¹ç›®</view>
      <view class="service-list">
        <view class="service-item" wx:for="{{merchantInfo.services}}" wx:key="*this">
          <text class="service-icon">âœ“</text>
          <text class="service-name">{{item}}</text>
        </view>
      </view>
    </view>

    <!-- å¾®ä¿¡äºŒç»´ç  -->
    <view class="section">
      <view class="section-title">å¾®ä¿¡äºŒç»´ç </view>
      <view class="qrcode-container">
        <image class="qrcode-image" 
               src="{{merchantInfo.contact.qrcode}}" 
               mode="aspectFit"
               bindtap="viewQRCode"></image>
        <text class="qrcode-tip">ç‚¹å‡»æŸ¥çœ‹å¤§å›¾</text>
      </view>
    </view>
  </view>
</view> 