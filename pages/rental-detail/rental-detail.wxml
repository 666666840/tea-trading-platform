<!-- å‡ºç§Ÿè½¬è®©è¯¦æƒ…é¡µé¢ -->
<view class="rental-detail-page">
  <!-- å›¾ç‰‡è½®æ’­ -->
  <view class="image-section">
    <swiper 
      class="image-swiper" 
      indicator-dots="{{rentalDetail.images.length > 1}}"
      autoplay="{{false}}"
      bindchange="onImageChange"
    >
      <swiper-item wx:for="{{rentalDetail.images}}" wx:key="*this">
        <image 
          class="detail-image" 
          src="{{item}}" 
          mode="aspectFill"
          data-index="{{index}}"
          bindtap="previewImage"
        ></image>
      </swiper-item>
    </swiper>
    
    <!-- å›¾ç‰‡æŒ‡ç¤ºå™¨ -->
    <view class="image-indicator" wx:if="{{rentalDetail.images.length > 1}}">
      <text class="indicator-text">{{currentImageIndex + 1}}/{{rentalDetail.images.length}}</text>
    </view>
    
    <!-- æ¨èæ ‡è¯† -->
    <view class="recommend-badge" wx:if="{{rentalDetail.isRecommended}}">
      <text class="badge-text">æ¨è</text>
    </view>
    
    <!-- ç´§æ€¥æ ‡è¯† -->
    <view class="urgent-badge" wx:if="{{rentalDetail.isUrgent}}">
      <text class="badge-text">ç´§æ€¥</text>
    </view>
    
    <!-- ä»·æ ¼ç±»å‹æ ‡è¯† -->
    <view class="price-type-badge {{rentalDetail.priceType}}">
      <text class="badge-text">{{rentalDetail.priceType === 'transfer' ? 'è½¬è®©' : 'å‡ºç§Ÿ'}}</text>
    </view>
  </view>

  <!-- åŸºæœ¬ä¿¡æ¯ -->
  <view class="basic-info">
    <view class="info-header">
      <text class="info-title">{{rentalDetail.title}}</text>
      <view class="info-tags">
        <text class="tag-item">{{rentalDetail.typeName}}</text>
        <text class="tag-item">{{rentalDetail.area}}{{rentalDetail.areaUnit}}</text>
      </view>
    </view>
    
    <view class="price-section">
      <text class="price-label">ä»·æ ¼ï¼š</text>
      <text class="price-value">{{rentalDetail.price}}</text>
    </view>
    
    <view class="location-section">
      <text class="location-icon">ğŸ“</text>
      <text class="location-text">{{rentalDetail.location}}</text>
    </view>
    
    <view class="feature-tags">
      <text 
        wx:for="{{rentalDetail.tags}}" 
        wx:key="*this"
        class="feature-tag"
      >
        {{item}}
      </text>
    </view>
  </view>

  <!-- å‘å¸ƒè€…ä¿¡æ¯ -->
  <view class="publisher-section">
    <view class="section-title">å‘å¸ƒè€…ä¿¡æ¯</view>
    <view class="publisher-card">
      <view class="publisher-basic">
        <image class="publisher-avatar" src="{{rentalDetail.merchant.avatar}}" mode="aspectFill"></image>
        <view class="publisher-details">
          <text class="publisher-name">{{rentalDetail.merchant.name}}</text>
          <view class="publisher-rating">
            <text class="rating-score">{{rentalDetail.merchant.rating}}</text>
            <text class="rating-star">â­</text>
            <text class="verified-badge" wx:if="{{rentalDetail.merchant.isVerified}}">å·²è®¤è¯</text>
          </view>
        </view>
      </view>
      
      <view class="contact-actions">
        <button 
          class="contact-btn primary"
          bindtap="contactPublisher"
        >
          {{contactUnlocked ? 'è”ç³»å‘å¸ƒè€…' : 'è§£é”è”ç³»æ–¹å¼'}}
        </button>
        
        <button 
          class="contact-btn secondary"
          bindtap="callPhone"
          wx:if="{{contactUnlocked}}"
        >
          æ‹¨æ‰“ç”µè¯
        </button>
        
        <button 
          class="contact-btn secondary"
          bindtap="copyWechat"
          wx:if="{{contactUnlocked}}"
        >
          å¤åˆ¶å¾®ä¿¡
        </button>
      </view>
      
      <!-- è”ç³»ä¿¡æ¯ï¼ˆè§£é”åæ˜¾ç¤ºï¼‰ -->
      <view class="contact-info" wx:if="{{contactUnlocked}}">
        <view class="contact-item">
          <text class="contact-label">ç”µè¯ï¼š</text>
          <text class="contact-value">{{rentalDetail.merchant.phone}}</text>
        </view>
        <view class="contact-item">
          <text class="contact-label">å¾®ä¿¡ï¼š</text>
          <text class="contact-value">{{rentalDetail.merchant.wechat}}</text>
        </view>
        <view class="contact-item">
          <text class="contact-label">åœ°å€ï¼š</text>
          <text class="contact-value">{{rentalDetail.merchant.address}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- è¯¦ç»†ä¿¡æ¯ -->
  <view class="detail-section">
    <view class="section-title">è¯¦ç»†ä¿¡æ¯</view>
    
    <!-- å¸‚åœºæ¡£å£ç‰¹æœ‰ä¿¡æ¯ -->
    <view class="detail-card" wx:if="{{rentalDetail.type === 'market'}}">
      <view class="card-title">æ¡£å£ä¿¡æ¯</view>
      <view class="detail-grid">
        <view class="detail-item">
          <text class="detail-label">æ¡£å£å·ï¼š</text>
          <text class="detail-value">{{rentalDetail.boothNumber}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">æ¥¼å±‚ï¼š</text>
          <text class="detail-value">{{rentalDetail.marketInfo.floor}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">æœå‘ï¼š</text>
          <text class="detail-value">{{rentalDetail.marketInfo.direction}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">è¥ä¸šæ—¶é—´ï¼š</text>
          <text class="detail-value">{{rentalDetail.marketInfo.businessHours}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">åœè½¦ï¼š</text>
          <text class="detail-value">{{rentalDetail.marketInfo.parking}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">å®‰ä¿ï¼š</text>
          <text class="detail-value">{{rentalDetail.marketInfo.security}}</text>
        </view>
      </view>
      
      <view class="facilities-section">
        <text class="facilities-title">é…å¥—è®¾æ–½ï¼š</text>
        <view class="facilities-list">
          <text 
            wx:for="{{rentalDetail.marketInfo.facilities}}" 
            wx:key="*this"
            class="facility-tag"
          >
            {{item}}
          </text>
        </view>
      </view>
    </view>
    
    <!-- è½¬è®©æ¡ä»¶ -->
    <view class="detail-card">
      <view class="card-title">è½¬è®©æ¡ä»¶</view>
      <view class="detail-grid">
        <view class="detail-item">
          <text class="detail-label">è½¬è®©è´¹ï¼š</text>
          <text class="detail-value">{{rentalDetail.transferConditions.transferFee}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">æŠ¼é‡‘ï¼š</text>
          <text class="detail-value">{{rentalDetail.transferConditions.deposit}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">åˆåŒæœŸé™ï¼š</text>
          <text class="detail-value">{{rentalDetail.transferConditions.contractTerm}}</text>
        </view>
      </view>
      
      <view class="requirements-section">
        <text class="requirements-title">è¦æ±‚æ¡ä»¶ï¼š</text>
        <view class="requirements-list">
          <text 
            wx:for="{{rentalDetail.transferConditions.requirements}}" 
            wx:key="*this"
            class="requirement-item"
          >
            â€¢ {{item}}
          </text>
        </view>
      </view>
    </view>
    
    <!-- è¯¦ç»†æè¿° -->
    <view class="detail-card">
      <view class="card-title">è¯¦ç»†æè¿°</view>
      <text class="description-text">{{rentalDetail.description}}</text>
    </view>
  </view>

  <!-- ç›¸å…³æ¨è -->
  <view class="related-section" wx:if="{{relatedRentals.length > 0}}">
    <view class="section-title">ç›¸å…³æ¨è</view>
    <view class="related-list">
      <view 
        wx:for="{{relatedRentals}}" 
        wx:key="id"
        class="related-item"
        data-id="{{item.id}}"
        bindtap="onRelatedTap"
      >
        <image class="related-image" src="{{item.image}}" mode="aspectFill"></image>
        <view class="related-info">
          <text class="related-title">{{item.title}}</text>
          <text class="related-location">{{item.location}}</text>
          <text class="related-price">{{item.price}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-actions">
    <view class="action-left">
      <button class="action-btn" bindtap="backToList">
        <text class="action-icon">â†</text>
        <text class="action-text">è¿”å›</text>
      </button>
      
      <button class="action-btn" bindtap="toggleFavorite">
        <text class="action-icon">â¤ï¸</text>
        <text class="action-text">æ”¶è—</text>
      </button>
      
      <button class="action-btn" bindtap="report">
        <text class="action-icon">âš ï¸</text>
        <text class="action-text">ä¸¾æŠ¥</text>
      </button>
    </view>
    
    <view class="action-right">
      <button class="publish-btn" bindtap="publishSimilar">
        <text class="publish-text">å‘å¸ƒç±»ä¼¼</text>
      </button>
    </view>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-section">
    <view class="stats-item">
      <text class="stats-icon">ğŸ‘ï¸</text>
      <text class="stats-text">{{rentalDetail.viewCount}}æ¬¡æµè§ˆ</text>
    </view>
    <view class="stats-item">
      <text class="stats-icon">ğŸ“…</text>
      <text class="stats-text">{{rentalDetail.createTime}}</text>
    </view>
  </view>
</view> 