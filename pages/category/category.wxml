<view class="category-container">
  <!-- è°ƒè¯•ä¿¡æ¯ -->
  <view class="debug-info" style="background: #f0f0f0; padding: 10rpx; font-size: 24rpx; color: #666;">
    è°ƒè¯•ä¿¡æ¯: ä»·æ ¼åˆ—è¡¨é•¿åº¦={{priceList.length}}, åŠ è½½çŠ¶æ€={{loading}}, å½“å‰åˆ†ç±»={{activeCategory}}
  </view>

  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="header">
    <view class="title">å“ç±»è¡Œæƒ…</view>
    <view class="subtitle">å®æ—¶ä»·æ ¼ Â· å¸‚åœºåŠ¨æ€ Â· è¶‹åŠ¿åˆ†æ</view>
  </view>



  <!-- åˆ†ç±»é€‰æ‹© -->
  <view class="category-tabs">
    <view 
      class="tab-item {{activeCategory === 'all' ? 'active' : ''}}" 
      data-category="all" 
      bindtap="switchCategory"
    >
      å…¨éƒ¨èŒ¶ç±»
    </view>
    <view 
      class="tab-item {{activeCategory === 'green' ? 'active' : ''}}" 
      data-category="green" 
      bindtap="switchCategory"
    >
      ç»¿èŒ¶
    </view>
    <view 
      class="tab-item {{activeCategory === 'white' ? 'active' : ''}}" 
      data-category="white" 
      bindtap="switchCategory"
    >
      ç™½èŒ¶
    </view>
    <view 
      class="tab-item {{activeCategory === 'yellow' ? 'active' : ''}}" 
      data-category="yellow" 
      bindtap="switchCategory"
    >
      é»„èŒ¶
    </view>
    <view 
      class="tab-item {{activeCategory === 'oolong' ? 'active' : ''}}" 
      data-category="oolong" 
      bindtap="switchCategory"
    >
      é’èŒ¶
    </view>
    <view 
      class="tab-item {{activeCategory === 'black' ? 'active' : ''}}" 
      data-category="black" 
      bindtap="switchCategory"
    >
      çº¢èŒ¶
    </view>
    <view 
      class="tab-item {{activeCategory === 'dark' ? 'active' : ''}}" 
      data-category="dark" 
      bindtap="switchCategory"
    >
      é»‘èŒ¶
    </view>
    <view 
      class="tab-item {{activeCategory === 'flower' ? 'active' : ''}}" 
      data-category="flower" 
      bindtap="switchCategory"
    >
      èŠ±èŒ¶
    </view>
  </view>

  <!-- ä»·æ ¼åˆ—è¡¨ -->
  <view class="price-list">
    <view wx:if="{{priceList.length === 0}}" class="empty-state">
      <image class="empty-icon" src="https://img.icons8.com/clouds/200/tea.png" mode="aspectFit"></image>
      <view class="empty-text">æš‚æ— {{categoryNames[activeCategory]}}ä»·æ ¼æ•°æ®</view>
      <view class="empty-desc">è¯·ç¨åå†è¯•æˆ–é€‰æ‹©å…¶ä»–èŒ¶ç±»</view>
      <view class="empty-desc">è°ƒè¯•: å½“å‰åˆ†ç±»={{activeCategory}}, åˆ—è¡¨é•¿åº¦={{priceList.length}}</view>
    </view>
    
    <view wx:for="{{priceList}}" wx:key="id" class="price-item" bindtap="viewPriceDetail" data-item="{{item}}">
      <view class="price-header">
        <view class="tea-name">{{item.name}}</view>
        <view class="price-change {{item.changeType}}">
          <text wx:if="{{item.changeType === 'up'}}">â†—</text>
          <text wx:elif="{{item.changeType === 'down'}}">â†˜</text>
          <text wx:else>â†’</text>
          {{item.changePercent}}%
        </view>
      </view>
      
      <view class="price-info">
        <view class="price-range">
          <text class="price-label">ä»·æ ¼åŒºé—´ï¼š</text>
          <text class="price-value">Â¥{{item.minPrice}}-{{item.maxPrice}}/{{item.unit}}</text>
        </view>
        <view class="price-avg">
          <text class="price-label">å¹³å‡ä»·æ ¼ï¼š</text>
          <text class="price-value">Â¥{{item.avgPrice}}/{{item.unit}}</text>
        </view>
      </view>
      
      <view class="price-details">
        <view class="detail-item">
          <text class="detail-label">äº§åœ°ï¼š</text>
          <text class="detail-value">{{item.origin}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">æ›´æ–°æ—¶é—´ï¼š</text>
          <text class="detail-value">{{item.updateTime}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">æ•°æ®æ¥æºï¼š</text>
          <text class="detail-value">{{item.sourceCount}}ä¸ªå•†æˆ·</text>
        </view>
      </view>
      
      <view class="price-tags">
        <view wx:if="{{item.isHot}}" class="tag hot">çƒ­é—¨</view>
        <view wx:if="{{item.isNew}}" class="tag new">æ–°å“</view>
        <view wx:if="{{item.isRecommended}}" class="tag recommended">æ¨è</view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view wx:if="{{hasMore && priceList.length > 0}}" class="load-more" bindtap="loadMore">
    <text wx:if="{{loading}}" class="loading-text">åŠ è½½ä¸­...</text>
    <text wx:else class="load-more-text">ç‚¹å‡»åŠ è½½æ›´å¤š</text>
  </view>

  <!-- å‘å¸ƒä»·æ ¼æŒ‰é’® -->
  <view class="publish-btn" bindtap="publishPrice">
    <text class="publish-icon">ğŸ“</text>
    <text class="publish-text">å‘å¸ƒä»·æ ¼</text>
  </view>
</view>