<!-- èŒ¶å›­ç›´é€šé¡µé¢ -->
<view class="garden-page">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <view class="header-title">
      <text class="title-text">èŒ¶å›­ç›´é€š</text>
      <text class="title-desc">æºå¤´ç›´é‡‡ Â· å“è´¨ä¿è¯</text>
    </view>
    <view class="season-tip" wx:if="{{currentSeason === 'spring'}}">
      <text class="tip-icon">ğŸŒ±</text>
      <text class="tip-text">æ˜¥èŒ¶é‡‡æ‘˜å­£ï¼Œå½“å­£æ¨èä¼˜å…ˆå±•ç¤º</text>
    </view>
  </view>

  <!-- ç­›é€‰å’Œæ’åº -->
  <view class="filter-section">
    <!-- äº§åŒºç­›é€‰ -->
    <view class="filter-row">
      <text class="filter-label">äº§åŒºï¼š</text>
      <view class="filter-options">
        <view 
          wx:for="{{filterOptions}}" 
          wx:key="value"
          class="filter-item {{currentFilter === item.value ? 'active' : ''}}"
          data-value="{{item.value}}"
          bindtap="onFilterChange"
        >
          {{item.label}}
        </view>
      </view>
    </view>
    
    <!-- æ’åºé€‰é¡¹ -->
    <view class="filter-row">
      <text class="filter-label">æ’åºï¼š</text>
      <view class="filter-options">
        <view 
          wx:for="{{sortOptions}}" 
          wx:key="value"
          class="filter-item {{currentSort === item.value ? 'active' : ''}}"
          data-value="{{item.value}}"
          bindtap="onSortChange"
        >
          {{item.label}}
        </view>
      </view>
    </view>
  </view>

  <!-- äº§åŒºåœ°å›¾å…¥å£ -->
  <view class="region-map-section">
    <view class="section-title">äº§åŒºåœ°å›¾</view>
    <view class="province-list">
      <view 
        wx:for="{{provinces}}" 
        wx:key="id"
        class="province-item"
        data-province="{{item.id}}"
        bindtap="viewRegionMap"
      >
        <view class="province-info">
          <text class="province-name">{{item.name}}</text>
          <text class="region-count">{{item.regions.length}}ä¸ªæ ¸å¿ƒäº§åŒº</text>
        </view>
        <view class="hot-regions">
          <text 
            wx:for="{{item.regions}}" 
            wx:key="id" 
            wx:for-item="region"
            class="region-tag {{region.isHot ? 'hot' : ''}}"
          >
            {{region.name}}
          </text>
        </view>
        <view class="arrow-icon">></view>
      </view>
    </view>
  </view>

  <!-- èŒ¶å›­åˆ—è¡¨ -->
  <view class="garden-list">
    <view class="list-title">èŒ¶å›­ç›´é‡‡</view>
    
    <view 
      wx:for="{{gardenList}}" 
      wx:key="id"
      class="garden-item"
      data-id="{{item.id}}"
      bindtap="onItemTap"
    >
      <!-- èŒ¶å›­å›¾ç‰‡ -->
      <view class="garden-images">
        <swiper class="image-swiper" indicator-dots="{{item.images.length > 1}}" autoplay="{{false}}">
          <swiper-item wx:for="{{item.images}}" wx:key="*this" wx:for-item="image">
            <image class="garden-image" src="{{image}}" mode="aspectFill"></image>
          </swiper-item>
        </swiper>
        
        <!-- è®¤è¯æ ‡è¯† -->
        <view class="certification-badge" wx:if="{{item.isCertified}}">
          <text class="badge-text">å®åœ°è®¤è¯</text>
        </view>
        
        <!-- å½“å­£æ ‡è¯† -->
        <view class="seasonal-badge" wx:if="{{item.isSeasonal}}">
          <text class="badge-text">å½“å­£é‡‡æ‘˜</text>
        </view>
        
        <!-- å“ç‰Œæ ‡è¯† -->
        <view class="brand-badge" wx:if="{{item.merchant.brand}}">
          <text class="badge-text">{{item.merchant.brand}}</text>
        </view>
      </view>

      <!-- èŒ¶å›­ä¿¡æ¯ -->
      <view class="garden-info">
        <view class="garden-header">
          <text class="garden-name">{{item.name}}</text>
          <view class="garden-tags">
            <text class="tag-item">{{item.teaType}}</text>
            <text class="tag-item">{{item.area}}{{item.areaUnit}}</text>
          </view>
        </view>
        
        <view class="garden-location">
          <text class="location-icon">ğŸ“</text>
          <text class="location-text">{{item.location}}</text>
        </view>
        
        <view class="harvest-info">
          <text class="harvest-label">é‡‡æ‘˜æœŸï¼š</text>
          <text class="harvest-period">{{item.harvestPeriod}}</text>
        </view>
        
        <view class="garden-features">
          <text 
            wx:for="{{item.features}}" 
            wx:key="*this" 
            wx:for-item="feature"
            class="feature-tag"
          >
            {{feature}}
          </text>
        </view>
      </view>

      <!-- èŒ¶å†œä¿¡æ¯ -->
      <view class="merchant-info">
        <view class="merchant-basic">
          <image class="merchant-avatar" src="{{item.merchant.avatar}}" mode="aspectFill"></image>
          <view class="merchant-details">
            <text class="merchant-name">{{item.merchant.name}}</text>
            <view class="merchant-rating">
              <text class="rating-score">{{item.merchant.rating}}</text>
              <text class="rating-star">â­</text>
              <text class="verified-badge" wx:if="{{item.merchant.isVerified}}">å·²è®¤è¯</text>
            </view>
          </view>
        </view>
        
        <view class="merchant-actions">
          <button 
            class="contact-btn"
            data-wechat="tea_farmer_{{item.id}}"
            bindtap="contactFarmer"
            catchtap="contactFarmer"
          >
            è”ç³»èŒ¶å†œ
          </button>
        </view>
      </view>

      <!-- åº•éƒ¨ä¿¡æ¯ -->
      <view class="item-footer">
        <view class="view-count">
          <text class="count-icon">ğŸ‘ï¸</text>
          <text class="count-text">{{item.viewCount}}æ¬¡æµè§ˆ</text>
        </view>
        <view class="create-time">
          <text class="time-text">{{item.createTime}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
  
  <view class="no-more" wx:if="{{!hasMore && gardenList.length > 0}}">
    <text class="no-more-text">æ²¡æœ‰æ›´å¤šèŒ¶å›­äº†</text>
  </view>
  
  <view class="empty-state" wx:if="{{gardenList.length === 0}}">
    <text class="empty-text">æš‚æ— èŒ¶å›­ä¿¡æ¯</text>
  </view>

  <!-- å‘å¸ƒæŒ‰é’® -->
  <view class="publish-btn" bindtap="navigateToPublish">
    <text class="publish-icon">ğŸŒ±</text>
    <text class="publish-text">å‘å¸ƒèŒ¶å›­</text>
  </view>
</view> 