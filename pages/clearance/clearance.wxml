<view class="clearance-container">
  <!-- 页面头部 -->
  <view class="page-header">
    <view class="header-left">
      <text class="header-title">尾货清仓</text>
      <text class="header-subtitle">特价优惠，清仓处理</text>
    </view>
  </view>

  <!-- 排序栏 -->
  <view class="sort-bar">
    <view class="sort-item {{currentSort === item.value ? 'active' : ''}}" 
          wx:for="{{sortOptions}}" 
          wx:key="value"
          data-value="{{item.value}}"
          bindtap="onSortChange">
      {{item.label}}
    </view>
  </view>

  <!-- 商品列表 -->
  <view class="clearance-list">
    <view class="clearance-item {{item.isUrgent ? 'urgent' : ''}}" 
          wx:for="{{clearanceList}}" 
          wx:key="id"
          data-id="{{item.id}}"
          bindtap="onItemTap">
      
      <!-- 紧急标识 -->
      <view class="urgent-badge" wx:if="{{item.isUrgent}}">
        <text class="urgent-text">紧急</text>
      </view>
      
      <!-- VIP标识 -->
      <view class="vip-badge" wx:if="{{item.isVip}}">
        <text class="vip-text">VIP</text>
      </view>

      <view class="item-content">
        <!-- 商品图片 -->
        <view class="item-image">
          <image src="{{item.image}}" mode="aspectFill" />
        </view>

        <!-- 商品信息 -->
        <view class="item-info">
          <view class="item-title">{{item.name}}</view>
          
          <!-- 清仓原因 -->
          <view class="reason-tag">{{item.reason}}</view>
          
          <!-- 价格信息 -->
          <view class="price-section">
            <text class="original-price">¥{{item.originalPrice}}</text>
            <text class="clearance-price">¥{{item.clearancePrice}}</text>
            <text class="discount-tag">
              {{Math.floor((item.originalPrice - item.clearancePrice) / item.originalPrice * 100)}}%OFF
            </text>
          </view>
          
          <!-- 库存信息 -->
          <view class="stock-section">
            <text class="stock-text">{{item.stockText}}</text>
            <view class="stock-bar">
              <view class="stock-progress" style="width: {{item.stockPercent}}%"></view>
            </view>
            <text class="stock-percent">剩余{{item.stockPercent}}%</text>
          </view>
          
          <!-- 倒计时 -->
          <view class="countdown-section">
            <text class="countdown-label">限时特价</text>
            <text class="countdown-time">{{item.countdown}}</text>
          </view>
          
          <!-- 关注人数 -->
          <view class="viewers-section">
            <text class="viewers-text">{{item.viewers}}人正在关注</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 加载状态 -->
  <view class="loading-section" wx:if="{{loading}}">
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 没有更多数据 -->
  <view class="no-more" wx:if="{{!hasMore && clearanceList.length > 0}}">
    <text class="no-more-text">没有更多数据了</text>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{!loading && clearanceList.length === 0}}">
    <image class="empty-image" src="/images/empty.png" mode="aspectFit" />
    <text class="empty-text">暂无特价尾货</text>
  </view>

  <!-- 发布按钮 -->
  <view class="publish-btn" bindtap="navigateToPublish">
    <text class="publish-icon">📝</text>
    <text class="publish-text">发布特价尾货</text>
  </view>
</view> 