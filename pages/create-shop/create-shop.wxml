<!-- åˆ›å»ºåº—é“ºé¡µé¢ -->
<view class="create-shop-page">
  <!-- æ­¥éª¤æŒ‡ç¤ºå™¨ -->
  <view class="step-indicator">
    <view class="step-item {{currentStep >= 1 ? 'active' : ''}}">
      <view class="step-number">1</view>
      <text class="step-text">åŸºæœ¬ä¿¡æ¯</text>
    </view>
    <view class="step-line {{currentStep >= 2 ? 'active' : ''}}"></view>
    <view class="step-item {{currentStep >= 2 ? 'active' : ''}}">
      <view class="step-number">2</view>
      <text class="step-text">åœ°å€ä¿¡æ¯</text>
    </view>
    <view class="step-line {{currentStep >= 3 ? 'active' : ''}}"></view>
    <view class="step-item {{currentStep >= 3 ? 'active' : ''}}">
      <view class="step-number">3</view>
      <text class="step-text">æ‰‹æœºéªŒè¯</text>
    </view>
  </view>

  <!-- è¡¨å•å†…å®¹ -->
  <view class="form-content">
    <!-- ç¬¬ä¸€æ­¥ï¼šåŸºæœ¬ä¿¡æ¯ -->
    <view class="form-step" wx:if="{{currentStep === 1}}">
      <view class="form-title">åº—é“ºåŸºæœ¬ä¿¡æ¯</view>
      
      <!-- åº—é“ºLogo -->
      <view class="form-item">
        <view class="form-label">å•†æˆ·ç…§ç‰‡ <text class="required">*</text></view>
        <view class="logo-upload" bindtap="onLogoSelect">
          <image 
            wx:if="{{formData.shopLogo}}" 
            class="logo-preview" 
            src="{{formData.shopLogo}}" 
            mode="aspectFill"
          ></image>
          <view wx:else class="logo-placeholder">
            <text class="upload-icon">ğŸ“·</text>
            <text class="upload-text">ä¸Šä¼ åº—é“ºLogo</text>
          </view>
        </view>
        <text class="error-text" wx:if="{{formErrors.shopLogo}}">{{formErrors.shopLogo}}</text>
      </view>

      <!-- åº—é“ºåç§° -->
      <view class="form-item">
        <view class="form-label">å•†æˆ·åç§° <text class="required">*</text></view>
        <input 
          class="form-input" 
          placeholder="è¯·è¾“å…¥åº—é“º/å…¬å¸åç§°"
          value="{{formData.shopName}}"
          bindinput="onShopNameInput"
        />
        <text class="error-text" wx:if="{{formErrors.shopName}}">{{formErrors.shopName}}</text>
      </view>

      <!-- ç»è¥ç±»å‹ -->
      <view class="form-item">
        <view class="form-label">ç»è¥ç±»å‹</view>
        <picker 
          class="form-picker"
          mode="selector"
          range="{{businessTypes}}"
          bindchange="onBusinessTypeChange"
        >
          <view class="picker-text">
            {{formData.businessType || 'è¯·é€‰æ‹©ç»è¥ç±»å‹'}}
          </view>
        </picker>
        <text class="error-text" wx:if="{{formErrors.businessType}}">{{formErrors.businessType}}</text>
      </view>
    </view>

    <!-- ç¬¬äºŒæ­¥ï¼šåœ°å€ä¿¡æ¯ -->
    <view class="form-step" wx:if="{{currentStep === 2}}">
      <view class="form-title">åœ°å€ä¿¡æ¯</view>
      
      <!-- åœ°åŒºé€‰æ‹© -->
      <view class="form-item">
        <view class="form-label">æ‰€åœ¨åœ°åŒº</view>
        <picker 
          class="form-picker"
          mode="region"
          bindchange="onRegionChange"
        >
          <view class="picker-text">
            {{formData.address.province && formData.address.city && formData.address.district ? 
              formData.address.province + formData.address.city + formData.address.district : 
              'è¯·é€‰æ‹©åœ°åŒº'}}
          </view>
        </picker>
        <text class="error-text" wx:if="{{formErrors.address}}">{{formErrors.address}}</text>
      </view>

      <!-- è¯¦ç»†åœ°å€ -->
      <view class="form-item">
        <view class="form-label">è¯¦ç»†åœ°å€</view>
        <textarea 
          class="form-textarea" 
          placeholder="è¯·è¾“å…¥è¯¦ç»†åœ°å€"
          value="{{formData.address.detail}}"
          bindinput="onDetailAddressInput"
        ></textarea>
        <text class="error-text" wx:if="{{formErrors.detailAddress}}">{{formErrors.detailAddress}}</text>
      </view>

      <!-- å¸¸å»çš„æ‰¹å‘å¸‚åœº -->
      <view class="form-item">
        <view class="form-label">å¸¸å»çš„æ‰¹å‘å¸‚åœº</view>
        <picker 
          class="form-picker"
          mode="selector"
          range="{{markets}}"
          bindchange="onMarketChange"
        >
          <view class="picker-text">
            {{formData.mainMarket || 'è¯·é€‰æ‹©æ‰¹å‘å¸‚åœº'}}
          </view>
        </picker>
      </view>

      <!-- ä¸»è¥å“ç±» -->
      <view class="form-item">
        <view class="form-label">ä¸»è¥å“ç±»</view>
        <picker 
          class="form-picker"
          mode="selector"
          range="{{['ç»¿èŒ¶ç±»', 'çº¢èŒ¶ç±»', 'ä¹Œé¾™èŒ¶ç±»', 'ç™½èŒ¶ç±»', 'é»‘èŒ¶ç±»', 'é»„èŒ¶ç±»', 'æ™®æ´±èŒ¶ç±»']}}"
          bindchange="onCategoryChange"
        >
          <view class="picker-text">
            {{formData.mainCategory || 'è¯·é€‰æ‹©ä¸»è¥å“ç±»'}}
          </view>
        </picker>
      </view>
    </view>

    <!-- ç¬¬ä¸‰æ­¥ï¼šæ‰‹æœºéªŒè¯ -->
    <view class="form-step" wx:if="{{currentStep === 3}}">
      <view class="form-title">æ‰‹æœºéªŒè¯</view>
      
      <!-- æ‰‹æœºå· -->
      <view class="form-item">
        <view class="form-label">æ‰‹æœºå· <text class="required">*</text></view>
        <input 
          class="form-input" 
          type="number"
          placeholder="è¯·è¾“å…¥æ‰‹æœºå·"
          value="{{formData.phone}}"
          bindinput="onPhoneInput"
        />
        <text class="error-text" wx:if="{{formErrors.phone}}">{{formErrors.phone}}</text>
      </view>

      <!-- éªŒè¯ç  -->
      <view class="form-item">
        <view class="form-label">éªŒè¯ç  <text class="required">*</text></view>
        <view class="verify-code-section">
          <input 
            class="form-input verify-input" 
            type="number"
            placeholder="è¯·è¾“å…¥éªŒè¯ç "
            value="{{formData.verifyCode}}"
            bindinput="onVerifyCodeInput"
          />
          <button 
            class="send-code-btn {{countdown > 0 ? 'disabled' : ''}}"
            bindtap="onSendCode"
            disabled="{{countdown > 0}}"
          >
            {{countdown > 0 ? countdown + 's' : 'å‘é€éªŒè¯ç '}}
          </button>
        </view>
        <text class="error-text" wx:if="{{formErrors.verifyCode}}">{{formErrors.verifyCode}}</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æŒ‰é’® -->
  <view class="bottom-buttons">
    <button 
      wx:if="{{currentStep > 1}}"
      class="prev-btn" 
      bindtap="onPrevStep"
    >
      ä¸Šä¸€æ­¥
    </button>
    <button 
      class="next-btn" 
      bindtap="onNextStep"
    >
      {{currentStep === totalSteps ? 'åˆ›å»ºåº—é“º' : 'ä¸‹ä¸€æ­¥'}}
    </button>
  </view>
</view> 