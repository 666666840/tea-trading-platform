<view class="container responsive">
  <!-- é¡¶éƒ¨æ å·²ç§»é™¤ï¼Œä½¿ç”¨å¾®ä¿¡å¯¼èˆªæ æ ‡é¢˜ -->

  <!-- å•†æˆ·å…¥é©»å¤§æŒ‰é’® -->
  <view class="join-section responsive">
    <button class="join-btn" bindtap="navigateToFunction" data-name="å•†æˆ·å…¥é©»" data-url="/pages/market/market?showJoin=true" aria-label="å•†æˆ·å…¥é©»">
      <view class="join-content">
        <view class="join-left">
          <text class="join-icon" aria-hidden="true">ğŸ¢</text>
          <view class="join-text-group">
            <text class="join-title">å•†æˆ·å…¥é©»</text>
            <text class="join-desc">å¿«é€Ÿç”³è¯·å…¥é©»èŒ¶å¶å¸‚åœº</text>
          </view>
        </view>
        <view class="join-right">
          <text class="join-arrow" aria-hidden="true">â†’</text>
        </view>
      </view>
    </button>
  </view>

  <!-- ä¹å®«æ ¼åŠŸèƒ½åŒº -->
  <view class="function-grid responsive" role="navigation" aria-label="åŠŸèƒ½åŒº">
    <view class="function-item" wx:for="{{functionList}}" wx:key="id" bindtap="navigateToFunction" data-url="{{item.url}}" data-name="{{item.name}}" aria-label="{{item.name}}">
      <view class="function-icon" aria-hidden="true">{{item.icon}}</view>
      <text class="function-text">{{item.name}}</text>
    </view>
  </view>

  <!-- å››ä¸ªåˆ†æ  - æ›´æ–°æ ·å¼ä»¥åŒ¹é…å›¾ç‰‡ -->
  <view class="home-tab-bar responsive" role="tablist" aria-label="å†…å®¹åˆ†æ ">
    <view class="home-tab-item {{activeTab === 'recommend' ? 'active' : ''}}" data-tab="recommend" bindtap="switchTab" role="tab" aria-selected="{{activeTab === 'recommend'}}">æ¨è</view>
    <view class="home-tab-item {{activeTab === 'news' ? 'active' : ''}}" data-tab="news" bindtap="switchTab" role="tab" aria-selected="{{activeTab === 'news'}}">èŒ¶è®¯</view>
    <view class="home-tab-item {{activeTab === 'art' ? 'active' : ''}}" data-tab="art" bindtap="switchTab" role="tab" aria-selected="{{activeTab === 'art'}}">èŒ¶è‰º</view>
    <view class="home-tab-item {{activeTab === 'hot' ? 'active' : ''}}" data-tab="hot" bindtap="switchTab" role="tab" aria-selected="{{activeTab === 'hot'}}">çƒ­ç‚¹</view>
  </view>

  <!-- å†…å®¹åŒº - æ›´æ–°æ ·å¼ä»¥åŒ¹é…å›¾ç‰‡ -->
  <view class="tab-content responsive" aria-label="å†…å®¹åŒº">
    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="loading" role="status" aria-live="polite">
      <view class="loading-spinner" aria-hidden="true"></view>
      <text>åŠ è½½ä¸­...</text>
    </view>

    <!-- æ¨èå†…å®¹åŒº -->
    <view wx:if="{{activeTab === 'recommend' && !loading}}" class="content-list" aria-label="æ¨èå†…å®¹åˆ—è¡¨">
      <view wx:for="{{recommendList}}" wx:key="id" class="content-item" data-item="{{item}}" bindtap="viewDetail" role="article" aria-label="{{item.title}}">
        <text class="hot-icon" wx:if="{{item.isHot}}">ğŸ”¥</text>
        <view class="content-title">{{item.title}}</view>
        <view class="content-summary">{{item.content}}</view>
        <view class="content-time">{{item.create_time}}</view>
      </view>
      <view wx:if="{{recommendList.length === 0}}" class="empty-state" role="alert">
        <text>æš‚æ— æ¨èå†…å®¹</text>
      </view>
    </view>

    <!-- èŒ¶è®¯å†…å®¹åŒº -->
    <view wx:if="{{activeTab === 'news' && !loading}}" class="content-list" aria-label="èŒ¶è®¯å†…å®¹åˆ—è¡¨">
      <view wx:for="{{newsList}}" wx:key="id" class="content-item" data-item="{{item}}" bindtap="viewDetail" role="article" aria-label="{{item.title}}">
        <text class="hot-icon" wx:if="{{item.isHot}}">ğŸ”¥</text>
        <view class="content-title">{{item.title}}</view>
        <view class="content-summary">{{item.content}}</view>
        <view class="content-time">{{item.create_time}}</view>
      </view>
      <view wx:if="{{newsList.length === 0}}" class="empty-state" role="alert">
        <text>æš‚æ— èŒ¶è®¯å†…å®¹</text>
      </view>
    </view>

    <!-- èŒ¶è‰ºå†…å®¹åŒº -->
    <view wx:if="{{activeTab === 'art' && !loading}}" class="content-list" aria-label="èŒ¶è‰ºå†…å®¹åˆ—è¡¨">
      <view wx:for="{{artList}}" wx:key="id" class="content-item" data-item="{{item}}" bindtap="viewDetail" role="article" aria-label="{{item.title}}">
        <text class="hot-icon" wx:if="{{item.isHot}}">ğŸ”¥</text>
        <view class="content-title">{{item.title}}</view>
        <view class="content-summary">{{item.content}}</view>
        <view class="content-time">{{item.create_time}}</view>
      </view>
      <view wx:if="{{artList.length === 0}}" class="empty-state" role="alert">
        <text>æš‚æ— èŒ¶è‰ºå†…å®¹</text>
      </view>
    </view>

    <!-- çƒ­ç‚¹å†…å®¹åŒº -->
    <view wx:if="{{activeTab === 'hot' && !loading}}" class="content-list" aria-label="çƒ­ç‚¹å†…å®¹åˆ—è¡¨">
      <view wx:for="{{hotList}}" wx:key="id" class="content-item" data-item="{{item}}" bindtap="viewDetail" role="article" aria-label="{{item.title}}">
        <text class="hot-icon" wx:if="{{item.isHot}}">ğŸ”¥</text>
        <view class="content-title">{{item.title}}</view>
        <view class="content-summary">{{item.content}}</view>
        <view class="content-time">{{item.create_time}}</view>
      </view>
      <view wx:if="{{hotList.length === 0}}" class="empty-state" role="alert">
        <text>æš‚æ— çƒ­ç‚¹å†…å®¹</text>
      </view>
    </view>

    <!-- APIæµ‹è¯•æŒ‰é’® -->
  </view>

  <!-- åœ¨é¦–é¡µæ·»åŠ å¿«é€Ÿè®¿é—®æŒ‰é’® -->
  <view class="quick-access" wx:if="{{isAdmin}}">
    <button class="quick-btn" bindtap="goToContentManagement">
      ğŸ“ å†…å®¹ç®¡ç†
    </button>
  </view>

  <!-- åœ¨é€‚å½“ä½ç½®æ·»åŠ ç®¡ç†åå°å…¥å£ -->
  <view class="admin-entry" wx:if="{{isAdmin}}">
    <button class="admin-btn" bindtap="goToAdmin" aria-label="ç®¡ç†åå°">
      <text class="admin-icon" aria-hidden="true">âš™ï¸</text>
      <text class="admin-text">ç®¡ç†åå°</text>
    </button>
  </view>

  <!-- åº•éƒ¨å¯¼èˆªæ ï¼ˆå¦‚æœ‰ï¼‰ -->
  <!--
  <view class="bottom-nav responsive">
    <view class="nav-item active">é¦–é¡µ</view>
    <view class="nav-item">é€šçŸ¥</view>
    <view class="nav-item">æˆ‘çš„</view>
  </view>
  -->
</view>

<!-- åŠ è½½åŠ¨ç”»æ ·å¼ï¼ˆå¯é…åˆwxssï¼‰ -->
<view wx:if="false" class="loading-spinner" style="display:none"></view>