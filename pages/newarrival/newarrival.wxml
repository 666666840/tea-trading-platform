<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <view class="header-left">
      <text class="header-title">æ–°å“åˆ°è´§</text>
      <text class="header-subtitle">æ–°é²œèŒ¶å¶ï¼ŒæŠ¢å…ˆä½“éªŒ</text>
    </view>
    <view class="header-right">
      <button class="publish-btn" bindtap="navigateToPublish">
        <text class="btn-icon">ğŸ“</text>
        <text class="btn-text">å‘å¸ƒæ–°å“</text>
      </button>
    </view>
  </view>

  <!-- ç­›é€‰æ  -->
  <view class="filter-bar">
    <view class="filter-item {{currentFilter === item.value ? 'active' : ''}}" 
          wx:for="{{filterOptions}}" 
          wx:key="value"
          data-value="{{item.value}}"
          bindtap="onFilterChange">
      {{item.label}}
    </view>
  </view>

  <!-- æ’åºæ  -->
  <view class="sort-bar">
    <view class="sort-item {{currentSort === item.value ? 'active' : ''}}" 
          wx:for="{{sortOptions}}" 
          wx:key="value"
          data-value="{{item.value}}"
          bindtap="onSortChange">
      {{item.label}}
    </view>
  </view>
  
  <!-- å•†å“åˆ—è¡¨ -->
  <view class="arrival-list">
    <view class="arrival-item {{item.isTop ? 'top' : ''}}" 
          wx:for="{{arrivalList}}" 
          wx:key="id"
          data-id="{{item.id}}"
          bindtap="onItemTap">
      
      <!-- ç½®é¡¶æ ‡è¯† -->
      <view class="top-badge" wx:if="{{item.isTop}}">
        <text class="top-text">ç½®é¡¶</text>
      </view>
      
      <!-- æ´»è·ƒå•†æˆ·æ ‡è¯† -->
      <view class="active-badge" wx:if="{{item.merchant.isActive}}">
        <text class="active-text">æ´»è·ƒ</text>
      </view>

      <view class="item-content">
        <!-- å•†å“å›¾ç‰‡ -->
        <view class="item-image">
          <image src="{{item.images[0]}}" mode="aspectFill" />
        </view>

        <!-- å•†å“ä¿¡æ¯ -->
        <view class="item-info">
          <view class="item-title">{{item.name}}</view>
          
          <!-- å“ç±»æ ‡ç­¾ -->
          <view class="category-tag">{{item.category}}</view>
          
          <!-- ä»·æ ¼ä¿¡æ¯ -->
          <view class="price-section">
            <text class="price-range">Â¥{{item.priceRange}}/æ–¤</text>
            <text class="stock-info">{{item.stock}}</text>
          </view>
          
          <!-- å•†å“æè¿° -->
          <view class="description">{{item.description}}</view>
          
          <!-- åˆ°è´§æ—¶é—´ -->
          <view class="arrival-time">
            <text class="time-label">åˆ°è´§æ—¶é—´ï¼š</text>
            <text class="time-value">{{item.arrivalTime}}</text>
          </view>
          
          <!-- å•†æˆ·ä¿¡æ¯ -->
          <view class="merchant-section">
            <image class="merchant-avatar" src="{{item.merchant.avatar}}" mode="aspectFill" />
            <view class="merchant-info">
              <text class="merchant-name">{{item.merchant.name}}</text>
              <view class="merchant-rating">
                <text class="rating-stars">â˜…â˜…â˜…â˜…â˜…</text>
                <text class="rating-score">{{item.merchant.rating}}</text>
              </view>
            </view>
            <button class="contact-btn" 
                    data-wechat="{{item.merchant.wechat}}"
                    bindtap="contactMerchant">
              è”ç³»
            </button>
          </view>
          
          <!-- æµè§ˆé‡ -->
          <view class="view-count">
            <text class="count-text">{{item.viewCount}}äººæµè§ˆ</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-section" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- æ²¡æœ‰æ›´å¤šæ•°æ® -->
  <view class="no-more" wx:if="{{!hasMore && arrivalList.length > 0}}">
    <text class="no-more-text">æ²¡æœ‰æ›´å¤šæ•°æ®äº†</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && arrivalList.length === 0}}">
    <image class="empty-image" src="/images/empty.png" mode="aspectFit" />
    <text class="empty-text">æš‚æ— æœ€æ–°åˆ°è´§ä¿¡æ¯</text>
  </view>
</view> 