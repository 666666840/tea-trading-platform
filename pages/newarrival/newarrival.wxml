<view class="container">
  <!-- 页面头部 -->
  <view class="page-header">
    <view class="header-left">
      <text class="header-title">新品到货</text>
      <text class="header-subtitle">新鲜茶叶，抢先体验</text>
    </view>
    <view class="header-right">
      <button class="publish-btn" bindtap="navigateToPublish">
        <text class="btn-icon">📝</text>
        <text class="btn-text">发布新品</text>
      </button>
    </view>
  </view>

  <!-- 筛选栏 -->
  <view class="filter-bar">
    <view class="filter-item {{currentFilter === item.value ? 'active' : ''}}" 
          wx:for="{{filterOptions}}" 
          wx:key="value"
          data-value="{{item.value}}"
          bindtap="onFilterChange">
      {{item.label}}
    </view>
  </view>

  <!-- 排序栏 -->
  <view class="sort-bar">
    <view class="sort-item {{currentSort === item.value ? 'active' : ''}}" 
          wx:for="{{sortOptions}}" 
          wx:key="value"
          data-value="{{item.value}}"
          bindtap="onSortChange">
      {{item.label}}
    </view>
  </view>
  
  <!-- 商品列表 -->
  <view class="arrival-list">
    <view class="arrival-item {{item.isTop ? 'top' : ''}}" 
          wx:for="{{arrivalList}}" 
          wx:key="id"
          data-id="{{item.id}}"
          bindtap="onItemTap">
      
      <!-- 置顶标识 -->
      <view class="top-badge" wx:if="{{item.isTop}}">
        <text class="top-text">置顶</text>
      </view>
      
      <!-- 活跃商户标识 -->
      <view class="active-badge" wx:if="{{item.merchant.isActive}}">
        <text class="active-text">活跃</text>
      </view>

      <view class="item-content">
        <!-- 商品图片 -->
        <view class="item-image">
          <image src="{{item.images[0]}}" mode="aspectFill" />
        </view>

        <!-- 商品信息 -->
        <view class="item-info">
          <view class="item-title">{{item.name}}</view>
          
          <!-- 品类标签 -->
          <view class="category-tag">{{item.category}}</view>
          
          <!-- 价格信息 -->
          <view class="price-section">
            <text class="price-range">¥{{item.priceRange}}/斤</text>
            <text class="stock-info">{{item.stock}}</text>
          </view>
          
          <!-- 商品描述 -->
          <view class="description">{{item.description}}</view>
          
          <!-- 到货时间 -->
          <view class="arrival-time">
            <text class="time-label">到货时间：</text>
            <text class="time-value">{{item.arrivalTime}}</text>
          </view>
          
          <!-- 商户信息 -->
          <view class="merchant-section">
            <image class="merchant-avatar" src="{{item.merchant.avatar}}" mode="aspectFill" />
            <view class="merchant-info">
              <text class="merchant-name">{{item.merchant.name}}</text>
              <view class="merchant-rating">
                <text class="rating-stars">★★★★★</text>
                <text class="rating-score">{{item.merchant.rating}}</text>
              </view>
            </view>
            <button class="contact-btn" 
                    data-wechat="{{item.merchant.wechat}}"
                    bindtap="contactMerchant">
              联系
            </button>
          </view>
          
          <!-- 浏览量 -->
          <view class="view-count">
            <text class="count-text">{{item.viewCount}}人浏览</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 加载状态 -->
  <view class="loading-section" wx:if="{{loading}}">
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 没有更多数据 -->
  <view class="no-more" wx:if="{{!hasMore && arrivalList.length > 0}}">
    <text class="no-more-text">没有更多数据了</text>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{!loading && arrivalList.length === 0}}">
    <image class="empty-image" src="/images/empty.png" mode="aspectFit" />
    <text class="empty-text">暂无最新到货信息</text>
  </view>
</view> 