<!-- å®æ—¶åŠŸèƒ½æ¼”ç¤ºé¡µé¢ -->
<view class="container">
  <!-- è¿æ¥çŠ¶æ€ -->
  <view class="status-section">
    <view class="status-card">
      <view class="status-header">
        <text class="status-title">è¿æ¥çŠ¶æ€</text>
        <view class="status-indicator {{connectionStatus}}">
          <text class="status-text">{{connectionStatus === 'connected' ? 'å·²è¿æ¥' : connectionStatus === 'connecting' ? 'è¿æ¥ä¸­' : connectionStatus === 'error' ? 'è¿æ¥é”™è¯¯' : 'æœªè¿æ¥'}}</text>
        </view>
      </view>
      <view class="status-info">
        <text class="info-item">è®¤è¯çŠ¶æ€: {{isAuthenticated ? 'å·²è®¤è¯' : 'æœªè®¤è¯'}}</text>
        <text class="info-item">ç”¨æˆ·ID: {{userId || 'æœªè®¾ç½®'}}</text>
        <text class="info-item">åœ¨çº¿ç”¨æˆ·: {{connectedUsers}}</text>
        <text class="info-item">æœåŠ¡å™¨æ—¶é—´: {{serverTime}}</text>
      </view>
      <view class="status-actions">
        <button class="btn btn-primary" bindtap="onConnect" disabled="{{connectionStatus === 'connected'}}">è¿æ¥</button>
        <button class="btn btn-secondary" bindtap="onDisconnect" disabled="{{connectionStatus !== 'connected'}}">æ–­å¼€</button>
        <button class="btn btn-info" bindtap="onGetStatus">è·å–çŠ¶æ€</button>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½æ“ä½œ -->
  <view class="actions-section">
    <view class="section-title">åŠŸèƒ½æ“ä½œ</view>
    <view class="actions-grid">
      <button class="action-btn" bindtap="onSetPriceAlert">
        <text class="action-icon">ğŸ’°</text>
        <text class="action-text">ä»·æ ¼æé†’</text>
      </button>
      <button class="action-btn" bindtap="onSetStockAlert">
        <text class="action-icon">ğŸ“¦</text>
        <text class="action-text">åº“å­˜æé†’</text>
      </button>
      <button class="action-btn" bindtap="onSubscribeMarket">
        <text class="action-icon">ğŸª</text>
        <text class="action-text">è®¢é˜…å¸‚åœº</text>
      </button>
      <button class="action-btn" bindtap="onSubscribePrice">
        <text class="action-icon">ğŸ“Š</text>
        <text class="action-text">è®¢é˜…ä»·æ ¼</text>
      </button>
      <button class="action-btn" bindtap="onTestNotification">
        <text class="action-icon">ğŸ“¢</text>
        <text class="action-text">æµ‹è¯•é€šçŸ¥</text>
      </button>
    </view>
  </view>

  <!-- å®æ—¶æ•°æ® -->
  <view class="data-section">
    <!-- é€šçŸ¥æ¶ˆæ¯ -->
    <view class="data-card">
      <view class="card-header">
        <text class="card-title">ğŸ“¢ é€šçŸ¥æ¶ˆæ¯ ({{notifications.length}})</text>
        <button class="clear-btn" bindtap="onClearNotifications">æ¸…ç©º</button>
      </view>
      <scroll-view class="data-list" scroll-y="true">
        <view wx:for="{{notifications}}" wx:key="id" class="data-item notification-item">
          <view class="item-header">
            <text class="item-title">{{item.title}}</text>
            <text class="item-time">{{item.timestamp}}</text>
          </view>
          <text class="item-content">{{item.content}}</text>
          <text class="item-type">ç±»å‹: {{item.type}}</text>
        </view>
        <view wx:if="{{notifications.length === 0}}" class="empty-state">
          <text class="empty-text">æš‚æ— é€šçŸ¥æ¶ˆæ¯</text>
        </view>
      </scroll-view>
    </view>

    <!-- å¸‚åœºæ›´æ–° -->
    <view class="data-card">
      <view class="card-header">
        <text class="card-title">ğŸª å¸‚åœºæ›´æ–° ({{marketUpdates.length}})</text>
        <button class="clear-btn" bindtap="onClearMarketUpdates">æ¸…ç©º</button>
      </view>
      <scroll-view class="data-list" scroll-y="true">
        <view wx:for="{{marketUpdates}}" wx:key="id" class="data-item market-item">
          <view class="item-header">
            <text class="item-title">å¸‚åœºID: {{item.marketId}}</text>
            <text class="item-time">{{item.timestamp}}</text>
          </view>
          <text class="item-content">æ›´æ–°ç±»å‹: {{item.updateType}}</text>
        </view>
        <view wx:if="{{marketUpdates.length === 0}}" class="empty-state">
          <text class="empty-text">æš‚æ— å¸‚åœºæ›´æ–°</text>
        </view>
      </scroll-view>
    </view>

    <!-- ä»·æ ¼æ›´æ–° -->
    <view class="data-card">
      <view class="card-header">
        <text class="card-title">ğŸ’° ä»·æ ¼æ›´æ–° ({{priceUpdates.length}})</text>
        <button class="clear-btn" bindtap="onClearPriceUpdates">æ¸…ç©º</button>
      </view>
      <scroll-view class="data-list" scroll-y="true">
        <view wx:for="{{priceUpdates}}" wx:key="id" class="data-item price-item">
          <view class="item-header">
            <text class="item-title">{{item.category}}</text>
            <text class="item-time">{{item.timestamp}}</text>
          </view>
          <text class="item-content">ä»·æ ¼æ•°æ®å·²æ›´æ–°</text>
        </view>
        <view wx:if="{{priceUpdates.length === 0}}" class="empty-state">
          <text class="empty-text">æš‚æ— ä»·æ ¼æ›´æ–°</text>
        </view>
      </scroll-view>
    </view>

    <!-- æ–°å“åˆ°è´§ -->
    <view class="data-card">
      <view class="card-header">
        <text class="card-title">ğŸ†• æ–°å“åˆ°è´§ ({{newArrivals.length}})</text>
        <button class="clear-btn" bindtap="onClearNewArrivals">æ¸…ç©º</button>
      </view>
      <scroll-view class="data-list" scroll-y="true">
        <view wx:for="{{newArrivals}}" wx:key="id" class="data-item arrival-item">
          <view class="item-header">
            <text class="item-title">{{item.name}}</text>
            <text class="item-time">{{item.timestamp}}</text>
          </view>
          <text class="item-content">ä»·æ ¼: Â¥{{item.price}} | åˆ†ç±»: {{item.category}}</text>
        </view>
        <view wx:if="{{newArrivals.length === 0}}" class="empty-state">
          <text class="empty-text">æš‚æ— æ–°å“åˆ°è´§</text>
        </view>
      </scroll-view>
    </view>

    <!-- æ¸…ä»“æé†’ -->
    <view class="data-card">
      <view class="card-header">
        <text class="card-title">ğŸ”¥ æ¸…ä»“æé†’ ({{clearanceAlerts.length}})</text>
        <button class="clear-btn" bindtap="onClearClearanceAlerts">æ¸…ç©º</button>
      </view>
      <scroll-view class="data-list" scroll-y="true">
        <view wx:for="{{clearanceAlerts}}" wx:key="id" class="data-item clearance-item">
          <view class="item-header">
            <text class="item-title">{{item.name}}</text>
            <text class="item-time">{{item.timestamp}}</text>
          </view>
          <text class="item-content">ç‰¹ä»·: Â¥{{item.salePrice}} | åº“å­˜: {{item.stock}}</text>
        </view>
        <view wx:if="{{clearanceAlerts.length === 0}}" class="empty-state">
          <text class="empty-text">æš‚æ— æ¸…ä»“æé†’</text>
        </view>
      </scroll-view>
    </view>

    <!-- ä»·æ ¼æé†’ -->
    <view class="data-card">
      <view class="card-header">
        <text class="card-title">ğŸ’° ä»·æ ¼æé†’ ({{priceAlerts.length}})</text>
      </view>
      <scroll-view class="data-list" scroll-y="true">
        <view wx:for="{{priceAlerts}}" wx:key="id" class="data-item alert-item">
          <view class="item-header">
            <text class="item-title">ä»·æ ¼æé†’è§¦å‘</text>
            <text class="item-time">{{item.timestamp}}</text>
          </view>
          <text class="item-content">å½“å‰ä»·æ ¼: Â¥{{item.currentPrice}}</text>
        </view>
        <view wx:if="{{priceAlerts.length === 0}}" class="empty-state">
          <text class="empty-text">æš‚æ— ä»·æ ¼æé†’</text>
        </view>
      </scroll-view>
    </view>

    <!-- åº“å­˜æé†’ -->
    <view class="data-card">
      <view class="card-header">
        <text class="card-title">ğŸ“¦ åº“å­˜æé†’ ({{stockAlerts.length}})</text>
      </view>
      <scroll-view class="data-list" scroll-y="true">
        <view wx:for="{{stockAlerts}}" wx:key="id" class="data-item alert-item">
          <view class="item-header">
            <text class="item-title">åº“å­˜æé†’è§¦å‘</text>
            <text class="item-time">{{item.timestamp}}</text>
          </view>
          <text class="item-content">å½“å‰åº“å­˜: {{item.currentStock}}</text>
        </view>
        <view wx:if="{{stockAlerts.length === 0}}" class="empty-state">
          <text class="empty-text">æš‚æ— åº“å­˜æé†’</text>
        </view>
      </scroll-view>
    </view>
  </view>
</view> 