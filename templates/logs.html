{% extends "base.html" %}
{% block content %}
<h4><i class="fas fa-list-alt"></i> 系统日志</h4>
<div class="d-flex justify-content-between align-items-center mb-3">
    <h5 class="mb-0"><i class="fas fa-list"></i> 系统操作日志</h5>
    <div>
        <a href="/export_logs" class="btn btn-outline-secondary btn-sm"><i class="fas fa-file-export"></i> 导出日志</a>
        <a href="/clear_logs" class="btn btn-outline-danger btn-sm"><i class="fas fa-trash"></i> 清空日志</a>
    </div>
</div>
<div class="table-responsive" style="background:#fff; border-radius:8px; box-shadow:0 2px 8px #eee;">
    <table class="table table-striped table-hover align-middle mb-0">
        <thead>
            <tr>
                <th>时间</th>
                <th>用户ID</th>
                <th>操作类型</th>
                <th>描述</th>
                <th>IP地址</th>
                <th>用户代理</th>
            </tr>
        </thead>
        <tbody>
            {% for log in logs %}
            <tr>
                <td>{{ log.time }}</td>
                <td>{{ log.user_id }}</td>
                <td>
                    <span class="badge bg-{{ 'success' if log.action=='login' else 'secondary' if log.action=='logout' else 'info' }}">
                        {{ log.action }}
                    </span>
                </td>
                <td>{{ log.desc }}</td>
                <td>{{ log.ip }}</td>
                <td style="max-width:200px;overflow-x:auto;">{{ log.ua }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %} 